"use strict";(self.webpackChunkniceadmin_angular=self.webpackChunkniceadmin_angular||[]).push([[100],{6100:(nn,M,w)=>{w.r(M),w.d(M,{BursaryModule:()=>tn});var p=w(6814),v=w(7553),y=w(7025),t=w(4769);let H=(()=>{var s;class a{}return(s=a).\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[p.ez,y.xD,y.xD]}),a})();var _=w(3161),Q=w(8180);let I,V=(()=>{var s;class a{constructor(){this._focusTrapStack=[]}register(e){this._focusTrapStack=this._focusTrapStack.filter(r=>r!==e);let n=this._focusTrapStack;n.length&&n[n.length-1]._disable(),n.push(e),e._enable()}deregister(e){e._disable();const n=this._focusTrapStack,r=n.indexOf(e);-1!==r&&(n.splice(r,1),n.length&&n[n.length-1]._enable())}}return(s=a).\u0275fac=function(e){return new(e||s)},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),a})();try{I=typeof Intl<"u"&&Intl.v8BreakIterator}catch{I=!1}let L=(()=>{var s;class a{constructor(e){this._platformId=e,this.isBrowser=this._platformId?(0,p.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!I)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return(s=a).\u0275fac=function(e){return new(e||s)(t.LFG(t.Lbi))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),a})(),O=(()=>{var s;class a{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function X(s){return!!(s.offsetWidth||s.offsetHeight||"function"==typeof s.getClientRects&&s.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const n=function z(s){try{return s.frameElement}catch{return null}}(function rt(s){return s.ownerDocument&&s.ownerDocument.defaultView||window}(e));if(n&&(-1===B(n)||!this.isVisible(n)))return!1;let r=e.nodeName.toLowerCase(),i=B(e);return e.hasAttribute("contenteditable")?-1!==i:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function it(s){let a=s.nodeName.toLowerCase(),o="input"===a&&s.type;return"text"===o||"password"===o||"select"===a||"textarea"===a}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==i:"video"===r?-1!==i&&(null!==i||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,n){return function at(s){return!function et(s){return function st(s){return"input"==s.nodeName.toLowerCase()}(s)&&"hidden"==s.type}(s)&&(function tt(s){let a=s.nodeName.toLowerCase();return"input"===a||"select"===a||"button"===a||"textarea"===a}(s)||function nt(s){return function ot(s){return"a"==s.nodeName.toLowerCase()}(s)&&s.hasAttribute("href")}(s)||s.hasAttribute("contenteditable")||J(s))}(e)&&!this.isDisabled(e)&&(n?.ignoreVisibility||this.isVisible(e))}}return(s=a).\u0275fac=function(e){return new(e||s)(t.LFG(L))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),a})();function J(s){if(!s.hasAttribute("tabindex")||void 0===s.tabIndex)return!1;let a=s.getAttribute("tabindex");return"-32768"!=a&&!(!a||isNaN(parseInt(a,10)))}function B(s){if(!J(s))return null;const a=parseInt(s.getAttribute("tabindex")||"",10);return isNaN(a)?-1:a}function Y(s){return null!=s&&"false"!=`${s}`}class lt{get enabled(){return this._enabled}set enabled(a){this._enabled=a,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(a,this._startAnchor),this._toggleAnchorTabIndex(a,this._endAnchor))}constructor(a,o,e,n,r=!1){this._element=a,this._checker=o,this._ngZone=e,this._document=n,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,r||this.attachAnchors()}destroy(){const a=this._startAnchor,o=this._endAnchor;a&&(a.removeEventListener("focus",this.startAnchorListener),a.parentNode&&a.parentNode.removeChild(a)),o&&(o.removeEventListener("focus",this.endAnchorListener),o.parentNode&&o.parentNode.removeChild(o)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(a=>{this._executeOnStable(()=>a(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(a=>{this._executeOnStable(()=>a(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(a=>{this._executeOnStable(()=>a(this.focusLastTabbableElement()))})}_getRegionBoundary(a){let o=this._element.querySelectorAll(`[cdk-focus-region-${a}], [cdkFocusRegion${a}], [cdk-focus-${a}]`);for(let e=0;e<o.length;e++)o[e].hasAttribute(`cdk-focus-${a}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${a}', use 'cdkFocusRegion${a}' instead. The deprecated attribute will be removed in 8.0.0.`,o[e]):o[e].hasAttribute(`cdk-focus-region-${a}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${a}', use 'cdkFocusRegion${a}' instead. The deprecated attribute will be removed in 8.0.0.`,o[e]);return"start"==a?o.length?o[0]:this._getFirstTabbableElement(this._element):o.length?o[o.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const a=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(a){if(a.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",a),!this._checker.isFocusable(a)){const o=this._getFirstTabbableElement(a);return o?.focus(),!!o}return a.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){const a=this._getRegionBoundary("start");return a&&a.focus(),!!a}focusLastTabbableElement(){const a=this._getRegionBoundary("end");return a&&a.focus(),!!a}hasAttached(){return this._hasAttached}_getFirstTabbableElement(a){if(this._checker.isFocusable(a)&&this._checker.isTabbable(a))return a;let o=a.children||a.childNodes;for(let e=0;e<o.length;e++){let n=o[e].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(o[e]):null;if(n)return n}return null}_getLastTabbableElement(a){if(this._checker.isFocusable(a)&&this._checker.isTabbable(a))return a;let o=a.children||a.childNodes;for(let e=o.length-1;e>=0;e--){let n=o[e].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(o[e]):null;if(n)return n}return null}_createAnchor(){const a=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,a),a.classList.add("cdk-visually-hidden"),a.classList.add("cdk-focus-trap-anchor"),a.setAttribute("aria-hidden","true"),a}_toggleAnchorTabIndex(a,o){a?o.setAttribute("tabindex","0"):o.removeAttribute("tabindex")}toggleAnchors(a){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(a,this._startAnchor),this._toggleAnchorTabIndex(a,this._endAnchor))}_executeOnStable(a){this._ngZone.isStable?a():this._ngZone.onStable.pipe((0,Q.q)(1)).subscribe(a)}}let dt=(()=>{var s;class a{constructor(e,n,r){this._checker=e,this._ngZone=n,this._document=r}create(e,n=!1){return new lt(e,this._checker,this._ngZone,this._document,n)}}return(s=a).\u0275fac=function(e){return new(e||s)(t.LFG(O),t.LFG(t.R0b),t.LFG(p.K0))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),a})(),ct=(()=>{var s;class a{get enabled(){return this.focusTrap.enabled}set enabled(e){this.focusTrap.enabled=Y(e)}get autoCapture(){return this._autoCapture}set autoCapture(e){this._autoCapture=Y(e)}constructor(e,n,r){this._elementRef=e,this._focusTrapFactory=n,this._previouslyFocusedElement=null,this._autoCapture=!1,this._document=r,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(e){const n=e.autoCapture;n&&!n.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=this._document.activeElement,this.focusTrap.focusInitialElementWhenReady()}}return(s=a).\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(dt),t.Y36(p.K0))},s.\u0275dir=t.lG2({type:s,selectors:[["","focusTrap",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["focusTrap"],features:[t.TTD]}),a})(),ut=(()=>{var s;class a{static forRoot(){return{ngModule:a,providers:[V,L,O]}}}return(s=a).\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[p.ez]}),a})();var pt=w(1835);const mt=["*"];let C=(()=>{var s;class a{constructor(){this.hide=()=>{},this.setClass=()=>{}}}return(s=a).\u0275fac=function(e){return new(e||s)},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"platform"}),a})(),j=(()=>{var s;class a{}return(s=a).\u0275fac=function(e){return new(e||s)},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"platform"}),a})();const D={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",animated:!0,initialState:{},closeInterceptor:void 0},ht=new t.OlP("override-default-config");let _t=(()=>{var s;class a{constructor(e,n,r){this._element=n,this._renderer=r,this.isShown=!1,this.isAnimated=!1,this._focusEl=null,this.isModalHiding=!1,this.clickStartedInContent=!1,this.config=Object.assign({},e)}ngOnInit(){this._focusEl=_.tj.activeElement,this.isAnimated&&this._renderer.addClass(this._element.nativeElement,"fade"),this._renderer.setStyle(this._element.nativeElement,"display","block"),setTimeout(()=>{this.isShown=!0,this._renderer.addClass(this._element.nativeElement,"show")},this.isAnimated?150:0),_.tj&&_.tj.body&&(this.bsModalService&&1===this.bsModalService.getModalsCount()&&(this.bsModalService.checkScrollbar(),this.bsModalService.setScrollbar()),this._renderer.addClass(_.tj.body,"modal-open"),this._renderer.setStyle(_.tj.body,"overflow-y","hidden")),this._element.nativeElement&&this._element.nativeElement.focus()}onClickStarted(e){this.clickStartedInContent=e.target!==this._element.nativeElement}onClickStop(e){this.config.ignoreBackdropClick||"static"===this.config.backdrop||e.target!==this._element.nativeElement||this.clickStartedInContent?this.clickStartedInContent=!1:(this.bsModalService?.setDismissReason("backdrop-click"),this.hide())}onPopState(){this.bsModalService?.setDismissReason("browser-back-navigation-clicked"),this.hide()}onEsc(e){this.isShown&&((27===e.keyCode||"Escape"===e.key)&&e.preventDefault(),this.config.keyboard&&this.level===this.bsModalService?.getModalsCount()&&(this.bsModalService?.setDismissReason("esc"),this.hide()))}ngOnDestroy(){this.isShown&&this._hide()}hide(){if(!this.isModalHiding){if(this.config.closeInterceptor)return void this.config.closeInterceptor().then(()=>this._hide(),()=>{});this._hide()}}_hide(){this.isModalHiding=!0,this._renderer.removeClass(this._element.nativeElement,"show"),setTimeout(()=>{this.isShown=!1,_.tj&&_.tj.body&&1===this.bsModalService?.getModalsCount()&&(this._renderer.removeClass(_.tj.body,"modal-open"),this._renderer.setStyle(_.tj.body,"overflow-y","")),this.bsModalService?.hide(this.config.id),this.isModalHiding=!1,this._focusEl&&this._focusEl.focus()},this.isAnimated?300:0)}}return(s=a).\u0275fac=function(e){return new(e||s)(t.Y36(j),t.Y36(t.SBq),t.Y36(t.Qsj))},s.\u0275cmp=t.Xpm({type:s,selectors:[["modal-container"]],hostAttrs:["role","dialog","tabindex","-1",1,"modal"],hostVars:3,hostBindings:function(e,n){1&e&&t.NdJ("mousedown",function(i){return n.onClickStarted(i)})("click",function(i){return n.onClickStop(i)})("popstate",function(){return n.onPopState()},!1,t.Jf7)("keydown.esc",function(i){return n.onEsc(i)},!1,t.Jf7),2&e&&t.uIk("aria-modal",!0)("aria-labelledby",n.config.ariaLabelledBy)("aria-describedby",n.config.ariaDescribedby)},ngContentSelectors:mt,decls:3,vars:2,consts:[["role","document","focusTrap",""],[1,"modal-content"]],template:function(e,n){1&e&&(t.F$t(),t.TgZ(0,"div",0)(1,"div",1),t.Hsn(2),t.qZA()()),2&e&&t.Tol("modal-dialog"+(n.config.class?" "+n.config.class:""))},dependencies:[ct],encapsulation:2}),a})(),gt=(()=>{var s;class a{get isAnimated(){return this._isAnimated}set isAnimated(e){this._isAnimated=e}get isShown(){return this._isShown}set isShown(e){this._isShown=e,e?this.renderer.addClass(this.element.nativeElement,"show"):this.renderer.removeClass(this.element.nativeElement,"show")}constructor(e,n){this._isAnimated=!1,this._isShown=!1,this.element=e,this.renderer=n}ngOnInit(){this.isAnimated&&(this.renderer.addClass(this.element.nativeElement,"fade"),_.cQ.reflow(this.element.nativeElement)),this.isShown=!0}}return(s=a).\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(t.Qsj))},s.\u0275cmp=t.Xpm({type:s,selectors:[["bs-modal-backdrop"]],hostAttrs:[1,"modal-backdrop"],decls:0,vars:0,template:function(e,n){},encapsulation:2}),a})(),ft=1,Z=(()=>{var s;class a{constructor(e,n,r){this.clf=n,this.modalDefaultOption=r,this.onShow=new t.vpe,this.onShown=new t.vpe,this.onHide=new t.vpe,this.onHidden=new t.vpe,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.modalsCount=0,this.loaders=[],this._focusEl=null,this._backdropLoader=this.clf.createLoader(),this._renderer=e.createRenderer(null,null),this.config=r?Object.assign({},D,r):D}show(e,n){this._focusEl=_.tj.activeElement,this.modalsCount++,this._createLoaders();const r=n?.id||ft++;return this.config=this.modalDefaultOption?Object.assign({},D,this.modalDefaultOption,n):Object.assign({},D,n),this.config.id=r,this._showBackdrop(),this.lastDismissReason=void 0,this._showModal(e)}hide(e){(1===this.modalsCount||null==e)&&(this._hideBackdrop(),this.resetScrollbar()),this.modalsCount=this.modalsCount>=1&&null!=e?this.modalsCount-1:0,setTimeout(()=>{this._hideModal(e),this.removeLoaders(e)},this.config.animated?150:0),this._focusEl&&this._focusEl.focus()}_showBackdrop(){const e=!0===this.config.backdrop||"static"===this.config.backdrop,n=!this.backdropRef||!this.backdropRef.instance.isShown;1===this.modalsCount&&(this.removeBackdrop(),e&&n&&(this._backdropLoader.attach(gt).to("body").show({isAnimated:this.config.animated}),this.backdropRef=this._backdropLoader._componentRef))}_hideBackdrop(){this.backdropRef&&(this.backdropRef.instance.isShown=!1,setTimeout(()=>this.removeBackdrop(),this.config.animated?150:0))}_showModal(e){const n=this.loaders[this.loaders.length-1];if(this.config&&this.config.providers)for(const c of this.config.providers)n.provide(c);const r=new C,i=n.provide({provide:j,useValue:this.config}).provide({provide:C,useValue:r}).attach(_t).to("body");return r.hide=()=>this.hide(r.id),r.setClass=c=>{i.instance&&(i.instance.config.class=c)},r.onHidden=new t.vpe,r.onHide=new t.vpe,this.copyEvent(n.onBeforeHide,r.onHide),this.copyEvent(n.onHidden,r.onHidden),i.show({content:e,isAnimated:this.config.animated,initialState:this.config.initialState,bsModalService:this,id:this.config.id}),i.instance&&(i.instance.level=this.getModalsCount(),r.content=n.getInnerComponent(),r.id=i.instance.config?.id),r}_hideModal(e){if(null!=e){const n=this.loaders.findIndex(i=>i.instance?.config.id===e),r=this.loaders[n];r&&r.hide(e)}else this.loaders.forEach(n=>{n.instance&&n.hide(n.instance.config.id)})}getModalsCount(){return this.modalsCount}setDismissReason(e){this.lastDismissReason=e}removeBackdrop(){this._renderer.removeClass(_.tj.body,"modal-open"),this._renderer.setStyle(_.tj.body,"overflow-y",""),this._backdropLoader.hide(),this.backdropRef=void 0}checkScrollbar(){this.isBodyOverflowing=_.tj.body.clientWidth<window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){_.tj&&(this.originalBodyPadding=parseInt(window.getComputedStyle(_.tj.body).getPropertyValue("padding-right")||"0",10),this.isBodyOverflowing&&(_.tj.body.style.paddingRight=`${this.originalBodyPadding+this.scrollbarWidth}px`))}resetScrollbar(){_.tj.body.style.paddingRight=`${this.originalBodyPadding}px`}getScrollbarWidth(){const e=this._renderer.createElement("div");this._renderer.addClass(e,"modal-scrollbar-measure"),this._renderer.appendChild(_.tj.body,e);const n=e.offsetWidth-e.clientWidth;return this._renderer.removeChild(_.tj.body,e),n}_createLoaders(){const e=this.clf.createLoader();this.copyEvent(e.onBeforeShow,this.onShow),this.copyEvent(e.onShown,this.onShown),this.copyEvent(e.onBeforeHide,this.onHide),this.copyEvent(e.onHidden,this.onHidden),this.loaders.push(e)}removeLoaders(e){if(null!=e){const n=this.loaders.findIndex(r=>r.instance?.config.id===e);n>=0&&(this.loaders.splice(n,1),this.loaders.forEach((r,i)=>{r.instance&&(r.instance.level=i+1)}))}else this.loaders.splice(0,this.loaders.length)}copyEvent(e,n){e.subscribe(r=>{n.emit(this.lastDismissReason||r)})}}return(s=a).\u0275fac=function(e){return new(e||s)(t.LFG(t.FYo),t.LFG(pt.oj),t.LFG(ht,8))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"platform"}),a})();ut.forRoot();var l=w(95),u=w(2096),T=w(7398),f=w(6306);const g=(0,w(2306).d)(s=>function(o=null){s(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=o});var b=w(3153),A=w(9229);function At(s,a){if(1&s&&(t.TgZ(0,"div")(1,"span",14),t._uU(2),t.qZA()()),2&s){const o=a.$implicit;t.xp6(2),t.hij(" ",o.name,"")}}let W=(()=>{var s;class a{constructor(e,n,r){this.bsModalRef=e,this.httpService=n,this.toastr=r,this.studList=[],this.countyAppr=!1,this.list=[]}ngOnInit(){}onFileSelected(e){const n=e.target;if(typeof FileReader<"u"){const r=new FileReader;r.onload=i=>{},r.readAsArrayBuffer(n.files[0])}this.approvalDoc=n.files[0]}submit(){let e=new FormData;e.append("approvalForm",this.approvalDoc);let n=this.studList?.map(i=>i._id);e.append("payload",JSON.stringify(n)),this.httpService.postReq(this.countyAppr?"bursary/bulk-county-approval":"bursary/bulk-ward-approval",e).subscribe({next:i=>{this.toastr.success(i.message),this.bsModalRef.hide()},error:i=>{this.toastr.error(i)}})}}return(s=a).\u0275fac=function(e){return new(e||s)(t.Y36(C),t.Y36(b.G),t.Y36(A._W))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-bulk-approval"]],decls:20,vars:3,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"d-flex","flex-row","flex-wrap","justify-content-around"],[4,"ngFor","ngForOf"],[1,"m-2"],[1,"form-group"],["for","file"],["type","file","id","file","placeholder","Select approval form","accept","application/pdf",1,"form-control",3,"change"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-default",3,"click"],[1,"badge","bg-primary","mr-1"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h5",1),t._uU(2),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.bsModalRef.hide()}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4)(7,"div",5),t.YNc(8,At,3,1,"div",6),t.qZA(),t._UZ(9,"hr"),t.TgZ(10,"form",7)(11,"div",8)(12,"label",9),t._uU(13,"Approved Students Form"),t.qZA(),t.TgZ(14,"input",10),t.NdJ("change",function(i){return n.onFileSelected(i)}),t.qZA()()()(),t.TgZ(15,"div",11)(16,"button",12),t.NdJ("click",function(){return n.submit()}),t._uU(17," Submit "),t.qZA(),t.TgZ(18,"button",13),t.NdJ("click",function(){return n.bsModalRef.hide()}),t._uU(19),t.qZA()()),2&e&&(t.xp6(2),t.Oqu(n.title),t.xp6(6),t.Q6J("ngForOf",n.studList),t.xp6(11),t.hij(" ",n.closeBtnName," "))},dependencies:[p.sg,l._Y,l.JL,l.F]}),a})();var S=w(9854);const wt=["table"];function Tt(s,a){if(1&s){const o=t.EpF();t.TgZ(0,"input",14),t.NdJ("keyup",function(){t.CHM(o);const n=t.oxw(2);return t.KtG(n.updateFilter())})("keydown",function(){t.CHM(o);const n=t.oxw(2);return t.KtG(n.updateFilter())}),t.qZA()}if(2&s){const o=a.$implicit;t.Q6J("placeholder",o.name)("id",o.prop)}}function yt(s,a){if(1&s&&(t.ynx(0),t.TgZ(1,"option",17),t._uU(2),t.qZA(),t.BQk()),2&s){const o=a.$implicit;t.xp6(1),t.Q6J("value",o.val),t.xp6(1),t.Oqu(o.label)}}function Zt(s,a){if(1&s){const o=t.EpF();t.TgZ(0,"select",15),t.NdJ("change",function(){t.CHM(o);const n=t.oxw(2);return t.KtG(n.updateFilter())}),t.TgZ(1,"option",16),t._uU(2),t.qZA(),t.YNc(3,yt,3,2,"ng-container",5),t.qZA()}if(2&s){const o=a.$implicit;t.Q6J("id",o.prop),t.xp6(2),t.hij(" ",o.name," "),t.xp6(1),t.Q6J("ngForOf",o.options)}}function St(s,a){if(1&s){const o=t.EpF();t.TgZ(0,"div",7)(1,"div",8),t.YNc(2,Tt,1,2,"input",9),t.YNc(3,Zt,4,3,"select",10),t.qZA(),t.TgZ(4,"button",11),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.clearFilters())}),t.TgZ(5,"p",12),t._uU(6,"Clear Filters"),t.qZA(),t._UZ(7,"i",13),t.qZA()()}if(2&s){const o=t.oxw();t.xp6(2),t.Q6J("ngForOf",o.filterColumns),t.xp6(1),t.Q6J("ngForOf",o.toggleFilters)}}function Ct(s,a){if(1&s&&(t.ynx(0),t._UZ(1,"ngx-datatable-column",18),t.BQk()),2&s){const o=a.$implicit;t.xp6(1),t.s9C("name",o.name),t.s9C("prop",o.prop),t.Q6J("draggable",!1)("resizeable",!1)("maxWidth",o.maxW)("minWidth",o.minW)}}function xt(s,a){if(1&s){const o=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){t.CHM(o);const n=t.oxw().$implicit,r=t.oxw().row,i=t.oxw(3);return t.KtG(i.sendEvent(r,n))}),t._UZ(1,"i",34),t.qZA()}}function kt(s,a){if(1&s){const o=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(o);const n=t.oxw().$implicit,r=t.oxw().row,i=t.oxw(3);return t.KtG(i.sendEvent(r,n))}),t._UZ(1,"i",36),t.qZA()}}function Rt(s,a){if(1&s){const o=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(){t.CHM(o);const n=t.oxw().$implicit,r=t.oxw().row,i=t.oxw(3);return t.KtG(i.sendEvent(r,n))}),t._UZ(1,"i",38),t.qZA()}}function Dt(s,a){if(1&s){const o=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){t.CHM(o);const n=t.oxw().$implicit,r=t.oxw().row,i=t.oxw(3);return t.KtG(i.sendEvent(r,n))}),t._UZ(1,"i",40),t.qZA()}}function Et(s,a){if(1&s){const o=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){t.CHM(o);const n=t.oxw().$implicit,r=t.oxw().row,i=t.oxw(3);return t.KtG(i.sendEvent(r,n))}),t._UZ(1,"i",42),t.qZA()}}function It(s,a){if(1&s){const o=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){t.CHM(o);const n=t.oxw().$implicit,r=t.oxw().row,i=t.oxw(3);return t.KtG(i.sendEvent(r,n))}),t._UZ(1,"i",43),t.qZA()}}function Nt(s,a){if(1&s){const o=t.EpF();t.TgZ(0,"button",44),t.NdJ("click",function(){t.CHM(o);const n=t.oxw().$implicit,r=t.oxw().row,i=t.oxw(3);return t.KtG(i.sendEvent(r,n))}),t._UZ(1,"i",45),t.qZA()}}function Ut(s,a){if(1&s&&(t.ynx(0),t.YNc(1,xt,2,0,"button",27),t.YNc(2,kt,2,0,"button",28),t.YNc(3,Rt,2,0,"button",29),t.YNc(4,Dt,2,0,"button",30),t.YNc(5,Et,2,0,"button",31),t.YNc(6,It,2,0,"button",27),t.YNc(7,Nt,2,0,"button",32),t.BQk()),2&s){const o=a.$implicit;t.xp6(1),t.Q6J("ngIf","View"==o),t.xp6(1),t.Q6J("ngIf","Approve"==o),t.xp6(1),t.Q6J("ngIf","Download"==o),t.xp6(1),t.Q6J("ngIf","Upload"==o),t.xp6(1),t.Q6J("ngIf","Reject"==o),t.xp6(1),t.Q6J("ngIf","Edit"==o),t.xp6(1),t.Q6J("ngIf","Delete"==o)}}function qt(s,a){if(1&s&&(t.TgZ(0,"span",24)(1,"div",25)(2,"div",26),t.YNc(3,Ut,8,7,"ng-container",5),t.qZA()()()),2&s){const o=t.oxw(3);t.xp6(3),t.Q6J("ngForOf",o.actions)}}function Ft(s,a){if(1&s&&(t.TgZ(0,"ngx-datatable-column",22),t.YNc(1,qt,4,1,"ng-template",23),t.qZA()),2&s){const o=t.oxw(2);t.Q6J("sortable",!1)("draggable",!1)("resizeable",!1)("maxWidth",o.actions.length>2?150:130)("minWidth",60)}}function Mt(s,a){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&s){const o=a.row,e=t.oxw(2).$implicit;t.Tol(!0===o.status?"badge bg-success mr-1":"badge bg-danger mr-1"),t.xp6(1),t.hij(" ",!0===o.status?"assigned"==e.prop||"approved"==e.prop?"True":"Active":"assigned"==e.prop||"approved"==e.prop?"False":"Inactive"," ")}}function Lt(s,a){if(1&s&&(t.TgZ(0,"ngx-datatable-column",46),t.YNc(1,Mt,2,4,"ng-template",47),t.qZA()),2&s){const o=t.oxw().$implicit;t.Q6J("resizeable",!1)("name",o.name)("prop",o.prop)("draggable",!1)("maxWidth",100)("minWidth",100)}}function Ot(s,a){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&s){const o=a.row;t.Tol("M"===o.gender?"badge bg-success mr-1":"badge bg-primary mr-1"),t.xp6(1),t.hij(" ","M"===o.gender?"Male":"Female"," ")}}function Jt(s,a){if(1&s&&(t.TgZ(0,"ngx-datatable-column",46),t.YNc(1,Ot,2,4,"ng-template",47),t.qZA()),2&s){const o=t.oxw().$implicit;t.Q6J("resizeable",!1)("name",o.name)("prop",o.prop)("draggable",!1)("maxWidth",100)("minWidth",100)}}function Bt(s,a){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&s){const o=a.row;t.Tol(o.isFinal?"badge bg-success mr-1":"badge bg-primary mr-1"),t.xp6(1),t.hij(" ",o.isFinal?"Yes":"No"," ")}}function Yt(s,a){if(1&s&&(t.TgZ(0,"ngx-datatable-column",46),t.YNc(1,Bt,2,4,"ng-template",47),t.qZA()),2&s){const o=t.oxw().$implicit;t.Q6J("resizeable",!1)("name",o.name)("prop",o.prop)("draggable",!1)("maxWidth",100)("minWidth",100)}}function jt(s,a){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&s){const o=a.row;t.Tol("PENDING"===o.wardStage?"badge bg-primary mr-1":"APPROVED"===o.wardStage?"badge bg-success mr-1":"badge bg-danger mr-1"),t.xp6(1),t.hij(" ",o.wardStage,"")}}function Wt(s,a){if(1&s&&(t.TgZ(0,"ngx-datatable-column",46),t.YNc(1,jt,2,4,"ng-template",47),t.qZA()),2&s){const o=t.oxw().$implicit;t.Q6J("resizeable",!1)("name",o.name)("prop",o.prop)("draggable",!1)("maxWidth",100)("minWidth",100)}}function Pt(s,a){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&s){const o=a.row;t.Tol("PENDING"===o.countyStage?"badge bg-primary mr-1":"APPROVED"===o.countyStage?"badge bg-success mr-1":"badge bg-danger mr-1"),t.xp6(1),t.hij(" ",o.countyStage,"")}}function $t(s,a){if(1&s&&(t.TgZ(0,"ngx-datatable-column",46),t.YNc(1,Pt,2,4,"ng-template",47),t.qZA()),2&s){const o=t.oxw().$implicit;t.Q6J("resizeable",!1)("name",o.name)("prop",o.prop)("draggable",!1)("maxWidth",100)("minWidth",100)}}function Gt(s,a){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&s){const o=a.row;t.Tol("PENDING"===o.ministryStage?"badge bg-primary mr-1":"APPROVED"===o.ministryStage?"badge bg-success mr-1":"badge bg-danger mr-1"),t.xp6(1),t.hij(" ",o.ministryStage,"")}}function Kt(s,a){if(1&s&&(t.TgZ(0,"ngx-datatable-column",46),t.YNc(1,Gt,2,4,"ng-template",47),t.qZA()),2&s){const o=t.oxw().$implicit;t.Q6J("resizeable",!1)("name",o.name)("prop",o.prop)("draggable",!1)("maxWidth",100)("minWidth",100)}}function Ht(s,a){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&s){const o=a.row;t.Tol("ASSIGNED"==o.taskStatus?"badge bg-info mr-1":"ONGOING"==o.taskStatus?"badge bg-primary mr-1":"COMPLETED"==o.taskStatus?"badge bg-success mr-1":"SCHEDULED"==o.taskStatus?"badge bg-secondary mr-1":"badge bg-danger mr-1"),t.xp6(1),t.hij(" ",o.taskStatus,"")}}function Qt(s,a){if(1&s&&(t.TgZ(0,"ngx-datatable-column",46),t.YNc(1,Ht,2,4,"ng-template",47),t.qZA()),2&s){const o=t.oxw().$implicit;t.Q6J("resizeable",!1)("name",o.name)("prop",o.prop)("draggable",!1)("maxWidth",115)("minWidth",100)}}function Vt(s,a){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&s){const o=a.row;t.Tol("PUBLISHED"==o.resStatus?"badge bg-success mr-1":"PENDING_PUBLISH"==o.resStatus?"badge bg-primary mr-1":"APPEALED"==o.resStatus?"badge bg-warning mr-1":"badge bg-danger mr-1"),t.xp6(1),t.hij(" ",o.resStatus,"")}}function zt(s,a){if(1&s&&(t.TgZ(0,"ngx-datatable-column",46),t.YNc(1,Vt,2,4,"ng-template",47),t.qZA()),2&s){const o=t.oxw().$implicit;t.Q6J("resizeable",!1)("name",o.name)("prop",o.prop)("draggable",!1)("maxWidth",130)("minWidth",100)}}function Xt(s,a){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&s){const o=a.row;t.Tol("PENDING"==o.reqStatus?"badge bg-secondary mr-1":"REJECTED"==o.reqStatus?"badge bg-danger mr-1":"badge bg-success mr-1"),t.xp6(1),t.hij(" ",o.reqStatus,"")}}function te(s,a){if(1&s&&(t.TgZ(0,"ngx-datatable-column",46),t.YNc(1,Xt,2,4,"ng-template",47),t.qZA()),2&s){const o=t.oxw().$implicit;t.Q6J("resizeable",!1)("name",o.name)("prop",o.prop)("draggable",!1)("maxWidth",120)("minWidth",100)}}function ee(s,a){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&s){const o=a.row;t.Tol(!1===o.blocked?"badge bg-success mr-1":"badge bg-danger mr-1"),t.xp6(1),t.hij(" ",!0===o.blocked?"True":"False","")}}function ne(s,a){if(1&s&&(t.TgZ(0,"ngx-datatable-column",46),t.YNc(1,ee,2,4,"ng-template",47),t.qZA()),2&s){const o=t.oxw().$implicit;t.Q6J("resizeable",!1)("name",o.name)("prop",o.prop)("draggable",!1)("maxWidth",100)("minWidth",100)}}function se(s,a){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&s){const o=a.row;t.Tol(!0===o.firstTimeLogin?"badge bg-success mr-1":"badge bg-danger mr-1"),t.xp6(1),t.hij(" ",!0===o.firstTimeLogin?"Yes":"No","")}}function oe(s,a){if(1&s&&(t.TgZ(0,"ngx-datatable-column",46),t.YNc(1,se,2,4,"ng-template",47),t.qZA()),2&s){const o=t.oxw().$implicit;t.Q6J("resizeable",!1)("name",o.name)("prop",o.prop.toLowerCase())("draggable",!1)("maxWidth",110)("minWidth",100)}}function ie(s,a){if(1&s&&t._UZ(0,"ngx-datatable-column",48),2&s){const o=t.oxw().$implicit;t.Q6J("draggable",!1)("resizeable",!1)("name",o.name)("prop",o.prop)("maxWidth",100)("minWidth",50)}}function ae(s,a){if(1&s&&(t.ynx(0),t.YNc(1,Ft,2,5,"ngx-datatable-column",19),t.YNc(2,Lt,2,6,"ngx-datatable-column",20),t.YNc(3,Jt,2,6,"ngx-datatable-column",20),t.YNc(4,Yt,2,6,"ngx-datatable-column",20),t.YNc(5,Wt,2,6,"ngx-datatable-column",20),t.YNc(6,$t,2,6,"ngx-datatable-column",20),t.YNc(7,Kt,2,6,"ngx-datatable-column",20),t.YNc(8,Qt,2,6,"ngx-datatable-column",20),t.YNc(9,zt,2,6,"ngx-datatable-column",20),t.YNc(10,te,2,6,"ngx-datatable-column",20),t.YNc(11,ne,2,6,"ngx-datatable-column",20),t.YNc(12,oe,2,6,"ngx-datatable-column",20),t.YNc(13,ie,1,6,"ngx-datatable-column",21),t.BQk()),2&s){const o=a.$implicit,e=t.oxw();t.xp6(1),t.Q6J("ngIf","Actions"===o.name&&e.actions.length>0),t.xp6(1),t.Q6J("ngIf","Status"===o.name||"Active"===o.name||"Assigned"===o.name),t.xp6(1),t.Q6J("ngIf","Gender"===o.name),t.xp6(1),t.Q6J("ngIf","isFinal"===o.prop),t.xp6(1),t.Q6J("ngIf","wardStage"===o.prop),t.xp6(1),t.Q6J("ngIf","countyStage"===o.prop),t.xp6(1),t.Q6J("ngIf","ministryStage"===o.prop),t.xp6(1),t.Q6J("ngIf","taskStatus"===o.prop),t.xp6(1),t.Q6J("ngIf","resStatus"===o.prop),t.xp6(1),t.Q6J("ngIf","reqStatus"===o.prop),t.xp6(1),t.Q6J("ngIf","Blocked"===o.name),t.xp6(1),t.Q6J("ngIf","firstTimeLogin"===o.prop),t.xp6(1),t.Q6J("ngIf","createdOn"===o.prop||"createdAt"===o.prop||"updatedOn"===o.prop||"updatedAt"===o.prop)}}function re(s,a){if(1&s&&(t.TgZ(0,"option",17),t._uU(1),t.qZA()),2&s){const o=a.$implicit;t.Q6J("value",o),t.xp6(1),t.hij(" ",1e3===o?"All ":o," Items ")}}function le(s,a){if(1&s){const o=t.EpF();t.TgZ(0,"select",49),t.NdJ("change",function(n){t.CHM(o);const r=t.oxw();return t.KtG(r.changePageSize(!1,n))}),t.YNc(1,re,2,2,"option",50),t.qZA(),t.TgZ(2,"datatable-pager",51),t.NdJ("change",function(n){t.CHM(o),t.oxw();const r=t.MAs(3);return t.KtG(r.onFooterPage(n))}),t.qZA()}if(2&s){const o=a.curPage,e=a.pageSize,n=a.rowCount,r=t.oxw();t.xp6(1),t.Q6J("ngForOf",r.pageSizes),t.xp6(1),t.Q6J("count",n)("page",o)("pagerLeftArrowIcon","datatable-icon-left")("pagerNextIcon","datatable-icon-skip")("pagerPreviousIcon","datatable-icon-prev")("pagerRightArrowIcon","datatable-icon-right")("size",e)}}const de=function(){return{prop:"id",dir:"desc"}},ce=function(s){return[s]};let k=(()=>{var s;class a{constructor(){this.ColumnMode=y.hq,this.loadingIndicator=!0,this.reorderable=!0,this.columns=[],this.modColumns=[],this.plainColumns=[],this.rows=[],this.hasExpandableRow=!1,this.totalItems=0,this.outputEvent=new t.vpe,this.selectedRowsEvent=new t.vpe,this.updateFilteredRows=new t.vpe,this.data=[],this.originalRows=[],this.filterColumns=[],this.toggleFilters=[],this.dateFilters=[],this.perPage=10,this.pageSizes=[5,10,20,50,100,1e3],this.pageSize=20,this.page=1,this.dataLoaded=!1,this.showPageSizeDropdown=!1,this.maxSize=5,this.selectedRange={},this.selected=[],this.SelectionType=y.RT}ngOnInit(){this.filterColumns=[...this.columns].filter(e=>"Actions"!==e.name&&"Status"!==e.name&&"Blocked"!==e.name&&"createdAt"!==e.prop&&"createdOn"!==e.prop&&"updatedAt"!==e.prop&&"systemRole"!==e.prop&&"firstTimeLogin"!==e.prop&&"approved"!==e.prop&&"assigned"!==e.prop&&"taskStatus"!==e.prop&&"deviceStatus"!==e.prop&&"reqStatus"!==e.prop&&"resStatus"!==e.prop&&"applStatus"!==e.prop&&"stanStatus"!==e.prop&&"taskDate"!==e.prop&&"enterprise"!==e.prop&&"enterpriseClass"!==e.prop&&"wardStage"!==e.prop&&"countyStage"!==e.prop&&"ministryStage"!==e.prop&&"isFinal"!==e.prop&&"channel"!==e.prop),this.toggleFilters=[...this.columns].filter(e=>"Active"==e.name||"Status"==e.name||"Blocked"==e.name||"systemRole"==e.prop||"firstTimeLogin"==e.prop||"approved"==e.prop||"assigned"==e.prop||"taskStatus"==e.prop||"deviceStatus"==e.prop||"reqStatus"==e.prop||"resStatus"==e.prop||"applStatus"==e.prop||"stanStatus"==e.prop||"enterprise"==e.prop||"enterpriseClass"==e.prop||"wardStage"==e.prop||"countyStage"==e.prop||"ministryStage"==e.prop||"isFinal"==e.prop||"channel"==e.prop),this.configureSelectParams(),this.dateFilters=[...this.columns].filter(e=>{if("updatedOn"==e.prop||"createdOn"==e.prop||"createdAt"==e.prop||"updatedAt"==e.prop||"taskDate"==e.prop)return this.selectedRange[e.prop]=[],e}),this.data=[...this.rows],console.log(this.data,"oninit"),this.changePageSize(!0),this.configureColumnParams()}configureSelectParams(){this.toggleFilters.forEach(e=>{("wardStage"==e.prop||"countyStage"==e.prop||"ministryStage"==e.prop)&&(e.options=[{val:"PENDING",label:"Pending"},{val:"APPROVED",label:"Approved"},{val:"REJECTED",label:"Rejected"}]),"status"==e.prop&&(e.options=[{val:"true",label:"Active"},{val:"false",label:"Inactive"}]),"isFinal"==e.prop&&(e.options=[{val:!0,label:"Yes"},{val:!1,label:"No"}]),"systemRole"!==e.prop&&"active"!==e.prop&&"deviceStatus"!==e.prop&&"taskStatus"!==e.prop&&"reqStatus"!==e.prop&&"resStatus"!==e.prop&&"applStatus"!==e.prop&&"stanStatus"!==e.prop&&"enterprise"!==e.prop&&"enterpriseClass"!==e.prop&&"wardStage"!==e.prop&&"countyStage"!==e.prop&&"ministryStage"!==e.prop&&"isFinal"!==e.prop&&"channel"!==e.prop&&(e.options=[{val:"true",label:"True"},{val:"false",label:"False"}])})}configureColumnParams(){let e=[...this.columns];e.forEach((n,r)=>{"Actions"!==n.name&&"Status"!==n.name&&"Blocked"!==n.name&&"Active"!==n.name&&"ID"!==n.name&&"#"!==n.name&&"systemRole"!==n.prop&&"createdOn"!==n.prop&&"gender"!==n.prop&&"createdAt"!==n.prop&&"updatedAt"!==n.prop&&"firstTimeLogin"!==n.prop&&"updatedOn"!==n.prop&&"assigned"!==n.prop&&"deviceStatus"!==n.prop&&"taskStatus"!==n.prop&&"resStatus"!==n.prop&&"reqStatus"!==n.prop&&"applStatus"!==n.prop&&"stanStatus"!==n.prop&&"wardStage"!==n.prop&&"countyStage"!==n.prop&&"ministryStage"!==n.prop&&"isFinal"!==n.prop&&"channel"!==n.prop&&(n.maxW="DOB"==n.name?500:"Age"==n.name||"Form/Year"==n.name?30:700,n.minW="Email"==n.name?240:90,this.plainColumns.push(n),e.splice(r,1,{})),this.modColumns=[...e].filter(i=>"{}"!==i)})}changePageSize(e=!1,n){this.pageSize=e?parseInt("5"):parseInt((n?.target).value)}sendEvent(e,n){console.log(e,n),this.outputEvent.emit(JSON.stringify({row:e,action:n}))}updateFilter(){this.data.length<1&&(this.data=[...this.rows],this.originalRows=[...this.rows]);let e=[...this.data];document.querySelectorAll(".filterInputs").forEach(i=>{if("Created On"==i.id||"createdOn"==i.id||"CreatedAt"==i.id||"createdAt"==i.id||"updatedOn"==i.id||"updatedAt"==i.id||"taskDate"==i.id){if(this.selectedRange[i.id].length>0){let c=this.selectedRange[i.id][0].toISOString(),d=this.selectedRange[i.id][1].toISOString();e=[...e.filter(function(h){if(h[i.id]){console.log(h),console.log(h[i.id]);let R=new Date(h[i.id]).toISOString();return R>=c&&R<=d}return null})]}}else if(""!==i.value){const c=e.filter(function(d){let m=i.id;if(console.log(d,m),null!=d[m])return-1!==d[m].toString().toLowerCase().indexOf(i.value.toLowerCase())||!i.value.toLowerCase()});console.log(e,i),e=[...c]}}),document.querySelectorAll(".filterSelect").forEach(i=>{let c=i.value;if(""!==c)if(1==c||0==c||"true"==c||"false"==c){console.log(c),"false"==c?c=!1:"true"==c&&(c=!0),console.log(e);const d=e.filter(function(m){return m[i.id]==c});console.log(d),e=[...d]}else{console.log(e,i);const d=e.filter(function(m){return m[i.id]==c});console.log(d),e=[...d]}this.loadingIndicator=!1}),this.rows=[...e],this.updateFilteredRows.emit(this.rows)}clearFilters(){console.log(this.originalRows),console.log(this.data),this.rows=void 0!==this.originalRows&&[...this.originalRows].length>0?[...this.originalRows]:void 0!==this.data&&[...this.data].length>0?[...this.data]:[...this.rows],document.querySelectorAll(".filterInputs").forEach(i=>{i.value=""}),document.querySelectorAll(".filterSelect").forEach(i=>{i.selectedIndex=0}),Object.keys(this.selectedRange).forEach(i=>{this.selectedRange[i]=[]}),this.updateFilteredRows.emit(this.rows)}onSelect(e){console.log("Select Event",e),console.log("Select",this.selected),this.selected.splice(0,this.selected.length),this.selected.push(...e.selected),this.selectedRowsEvent.emit(this.selected)}onActivate(e){}displayCheck(e){return"Ethel Price"!==e.name}}return(s=a).\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-custom-tbl"]],viewQuery:function(e,n){if(1&e&&t.Gf(wt,5),2&e){let r;t.iGM(r=t.CRH())&&(n.table=r.first)}},inputs:{loadingIndicator:"loadingIndicator",columns:"columns",modColumns:"modColumns",plainColumns:"plainColumns",rows:"rows",hasExpandableRow:"hasExpandableRow",disableFilters:"disableFilters",actions:"actions",totalItems:"totalItems"},outputs:{outputEvent:"outputEvent",selectedRowsEvent:"selectedRowsEvent",updateFilteredRows:"updateFilteredRows"},decls:9,vars:27,consts:[[1,"table-responsive"],["class","d-flex flex-row justify-content-between align-items-center",4,"ngIf"],[1,"material","border","p-2",3,"columnMode","columns","limit","loadingIndicator","rowHeight","headerHeight","footerHeight","rows","sorts","scrollbarH","selected","selectionType","selectAllRowsOnPage","displayCheck","activate","select"],["table",""],[3,"width","sortable","canAutoResize","draggable","resizeable","headerCheckboxable","checkboxable"],[4,"ngFor","ngForOf"],["ngx-datatable-footer-template",""],[1,"d-flex","flex-row","justify-content-between","align-items-center"],[1,"d-flex","flex-row","flex-wrap"],["class","form-control wd-150 border m-1 filterInputs form-control-sm","type","text",3,"placeholder","id","keyup","keydown",4,"ngFor","ngForOf"],["class","form-select m-1 wd-150 border filterSelect form-select-sm",3,"id","change",4,"ngFor","ngForOf"],[1,"btn","btn-icon-text","m-1","btn-xs","bg-danger","clearFilt","text-white",3,"click"],[1,"text-white","my-1"],["appFeatherIcon","","data-feather","x-square",1,"btn-icon-prepend","m-1"],["type","text",1,"form-control","wd-150","border","m-1","filterInputs","form-control-sm",3,"placeholder","id","keyup","keydown"],[1,"form-select","m-1","wd-150","border","filterSelect","form-select-sm",3,"id","change"],["disabled","","selected","","value",""],[3,"value"],[3,"name","prop","draggable","resizeable","maxWidth","minWidth"],["name","Actions","prop","actions",3,"sortable","draggable","resizeable","maxWidth","minWidth",4,"ngIf"],[3,"resizeable","name","prop","draggable","maxWidth","minWidth",4,"ngIf"],[3,"draggable","resizeable","name","prop","maxWidth","minWidth",4,"ngIf"],["name","Actions","prop","actions",3,"sortable","draggable","resizeable","maxWidth","minWidth"],["class","parent-item","ngx-datatable-cell-template",""],[1,"parent-item"],[1,"example"],["role","group",1,"btn-group"],["class","btn btn-primary btn-sm","type","button",3,"click",4,"ngIf"],["class","btn btn-primary btn-sm","type","button","ngbTooltip","Approve","placement","left",3,"click",4,"ngIf"],["class","btn btn-primary btn-sm","type","button","ngbTooltip","Download","placement","top",3,"click",4,"ngIf"],["class","btn btn-primary btn-sm","type","button","ngbTooltip","Upload Report","placement","bottom",3,"click",4,"ngIf"],["class","btn btn-danger btn-sm","type","button","ngbTooltip","Reject","placement","right",3,"click",4,"ngIf"],["class","btn btn-danger btn-sm","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"bi","bi-eye"],["type","button","ngbTooltip","Approve","placement","left",1,"btn","btn-primary","btn-sm",3,"click"],[1,"feather","icon-check"],["type","button","ngbTooltip","Download","placement","top",1,"btn","btn-primary","btn-sm",3,"click"],[1,"feather","icon-printer"],["type","button","ngbTooltip","Upload Report","placement","bottom",1,"btn","btn-primary","btn-sm",3,"click"],[1,"feather","icon-upload-cloud"],["type","button","ngbTooltip","Reject","placement","right",1,"btn","btn-danger","btn-sm",3,"click"],[1,"feather","icon-x"],[1,"bi","bi-pencil"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"feather","icon-trash"],[3,"resizeable","name","prop","draggable","maxWidth","minWidth"],["ngx-datatable-cell-template",""],[3,"draggable","resizeable","name","prop","maxWidth","minWidth"],[1,"form-select","ms-2","w-auto",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"count","page","pagerLeftArrowIcon","pagerNextIcon","pagerPreviousIcon","pagerRightArrowIcon","size","change"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,St,8,2,"div",1),t.TgZ(2,"ngx-datatable",2,3),t.NdJ("activate",function(i){return n.onActivate(i)})("select",function(i){return n.onSelect(i)}),t._UZ(4,"ngx-datatable-column",4),t.YNc(5,Ct,2,6,"ng-container",5),t.YNc(6,ae,14,13,"ng-container",5),t.TgZ(7,"ngx-datatable-footer"),t.YNc(8,le,3,8,"ng-template",6),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("ngIf",!n.disableFilters),t.xp6(1),t.Q6J("columnMode",n.ColumnMode.force)("columns",n.columns)("limit",n.pageSize)("loadingIndicator",n.loadingIndicator)("rowHeight","auto")("headerHeight",50)("footerHeight",50)("rows",n.rows)("sorts",t.VKq(25,ce,t.DdM(24,de)))("scrollbarH",!0)("selected",n.selected)("selectionType",n.SelectionType.checkbox)("selectAllRowsOnPage",!1)("displayCheck",n.displayCheck),t.xp6(2),t.Q6J("width",30)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1)("headerCheckboxable",!0)("checkboxable",!0),t.xp6(1),t.Q6J("ngForOf",n.plainColumns),t.xp6(1),t.Q6J("ngForOf",n.modColumns))},dependencies:[p.sg,p.O5,y.nE,y.UC,y.vq,y.ii,y.dX,y.Ke],styles:["input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.clearFilt[_ngcontent-%COMP%]{text-wrap:nowrap;max-height:40px;font-size:smaller}"]}),a})();function ue(s,a){1&s&&t.GkF(0)}let pe=(()=>{var s;class a{constructor(e,n,r,i,c){this.httpService=e,this.globalService=n,this.toastr=r,this.router=i,this.modalService=c,this.loading=!0,this.rows=[],this.filteredRows=[],this.defaultNavActiveId=1,this.columns=[{name:"Full Name",prop:"name"},{name:"Gender",prop:"gender"},{name:"Mobile No",prop:"phone"},{name:"Course",prop:"course"},{name:"Age",prop:"age"},{name:"Form/Year",prop:"formYear"},{name:"Village",prop:"village"},{name:"DOB",prop:"dob"},{name:"Ward Stage",prop:"wardStage"},{name:"Actions",prop:"_id"}],this.allColumns=[...this.columns],this.studentsList$=(0,u.of)([]),this.studentsToApprove=[],this.title="Assessor",this.actions=["View"],this.totalRecords=0,this.subs=[]}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}ngOnInit(){this.getIndividualData()}getIndividualData(e=0,n=50){this.loading=!0,this.studentsList$=this.httpService.getReq("bursary/students/ward").pipe((0,T.U)(i=>(console.log(i),console.log(i),200===i.statusCode?(this.rows=i.data.map((d,m)=>(d.dob=this.globalService.formatDate(d.dob),{...d,frontendId:m+1})),this.rows=this.rows.filter(d=>void 0!==d),this.totalRecords=this.rows.length,this.loading=!1,this.rows):(this.loading=!1,(0,u.of)([])))),(0,f.K)(i=>(this.loading=!1,i instanceof g?this.toastr.error(i.message,"API Timeout"):this.toastr.error(i.statusText||i.message,"Data Not Fetched"),(0,u.of)([]))))}updateColumns(e){this.columns=[...e]}triggerEvent(e){let n=JSON.parse(e);"View"==n.action&&(console.log(n.row),this.router.navigate([`bursary/student/${n.row._id}`]))}selectedRowsEvent(e){this.studentsToApprove=e,this.studentsToApprove=[...this.studentsToApprove].filter(n=>"APPROVED"===n.wardStage)}updateFilteredRowsEvent(e){this.filteredRows=e}bulkApproval(){this.studentsToApprove.length>0?(this.bsModalRef=this.modalService.show(W,{initialState:{title:"Approve Students"},class:"modal-md"}),this.bsModalRef.content.closeBtnName="Close",this.bsModalRef.content.isEdit=!1,this.bsModalRef.content.studList=this.studentsToApprove,this.bsModalRef.onHidden?.emit(n=>{console.log(n),this.getIndividualData()})):this.toastr.info("Select multiple students that match the document to upload")}}return(s=a).\u0275fac=function(e){return new(e||s)(t.Y36(b.G),t.Y36(S.s),t.Y36(A._W),t.Y36(v.F0),t.Y36(Z))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-list-students"]],decls:22,vars:8,consts:[[1,"pagetitle"],[1,"d-flex","justify-content-between","align-items-center"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","/admin/dashboard"],[1,"breadcrumb-item","active"],[1,"btn","bg-primary",3,"click"],[1,"text-white","m-0"],[1,"section"],[1,"d-flex","justify-content-end"],[1,"row"],[1,"col-md-12"],[1,"card","p-1"],[4,"ngIf"],[3,"columns","rows","actions","loadingIndicator","totalItems","outputEvent","selectedRowsEvent","updateFilteredRows"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Students Page"),t.qZA(),t.TgZ(3,"div",1)(4,"nav")(5,"ol",2)(6,"li",3)(7,"a",4),t._uU(8,"Dashboard"),t.qZA()(),t.TgZ(9,"li",5),t._uU(10,"Students"),t.qZA()()(),t.TgZ(11,"button",6),t.NdJ("click",function(){return n.bulkApproval()}),t.TgZ(12,"p",7),t._uU(13,"Approve Students"),t.qZA()()()(),t.TgZ(14,"section",8),t._UZ(15,"div",9),t.TgZ(16,"div",10)(17,"div",11)(18,"div",12),t.YNc(19,ue,1,0,"ng-container",13),t.ALo(20,"async"),t.TgZ(21,"app-custom-tbl",14),t.NdJ("outputEvent",function(i){return n.triggerEvent(i)})("selectedRowsEvent",function(i){return n.selectedRowsEvent(i)})("updateFilteredRows",function(i){return n.updateFilteredRowsEvent(i)}),t.qZA()()()()()),2&e&&(t.xp6(19),t.Q6J("ngIf",t.lcZ(20,6,n.studentsList$)),t.xp6(2),t.Q6J("columns",n.columns)("rows",n.rows)("actions",n.actions)("loadingIndicator",!1)("totalItems",n.totalRecords))},dependencies:[p.O5,k,p.Ov]}),a})(),U=(()=>{var s;class a{constructor(e,n){this.bsModalRef=e,this.httpService=n,this.isEdit=!1,this.list=[]}ngOnInit(){this.bursaryForm=new l.cw({bursary_name:new l.NI("",[l.kI.required]),bursary_description:new l.NI("",[l.kI.required]),bursary_amount:new l.NI("",[l.kI.required]),criteria:new l.NI("",[l.kI.required]),application_start_date:new l.NI("",[l.kI.required]),application_end_date:new l.NI("",[l.kI.required]),review_start_date:new l.NI("",[l.kI.required]),review_end_date:new l.NI("",[l.kI.required]),notification_date:new l.NI("",[l.kI.required]),disbursement_date:new l.NI("",[l.kI.required]),status:new l.NI(!0)})}submit(){if(this.isEdit)console.log(this.bursaryForm.value);else{console.log("this.bursaryForm.value");let e={bursary_name:this.bursaryForm.controls.bursary_name.value,bursary_description:this.bursaryForm.controls.bursary_description.value,bursary_amount:this.bursaryForm.controls.bursary_amount.value.toString(),criteria:this.bursaryForm.controls.criteria.value,application_start_date:new Date(this.bursaryForm.controls.application_start_date.value).toISOString(),application_end_date:new Date(this.bursaryForm.controls.application_end_date.value).toISOString(),review_start_date:new Date(this.bursaryForm.controls.review_start_date.value).toISOString(),review_end_date:new Date(this.bursaryForm.controls.review_end_date.value).toISOString(),notification_date:new Date(this.bursaryForm.controls.notification_date.value).toISOString(),disbursement_date:new Date(this.bursaryForm.controls.disbursement_date.value).toISOString(),status:this.bursaryForm.controls.status.value};this.httpService.postReq("bursary/create",e).subscribe({next:r=>{console.log(r),r&&(this.bsModalRef.hide(),this.bsModalRef.onHide?.emit(r))},error:r=>{}})}}}return(s=a).\u0275fac=function(e){return new(e||s)(t.Y36(C),t.Y36(b.G))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-add-edit-bursary"]],decls:62,vars:3,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"m-2",3,"formGroup"],[1,"form-group"],["for","bursaryName"],["type","text","id","bursaryName","placeholder","Enter bursary name","formControlName","bursary_name",1,"form-control"],["for","bursaryDescription"],["id","bursaryDescription","rows","3","placeholder","Enter bursary description","formControlName","bursary_description",1,"form-control"],["for","bursaryAmount"],["type","number","id","bursaryAmount","placeholder","Enter bursary amount","formControlName","bursary_amount",1,"form-control"],["for","criteria"],["type","text","id","criteria","placeholder","Enter criteria","formControlName","criteria",1,"form-control"],[1,"row"],[1,"col-md-6"],["for","applicationStartDate"],["type","date","id","applicationStartDate","formControlName","application_start_date",1,"form-control"],["for","applicationEndDate"],["type","date","id","applicationEndDate","formControlName","application_end_date",1,"form-control"],["for","reviewStartDate"],["type","date","id","reviewStartDate","formControlName","review_start_date",1,"form-control"],["for","reviewEndDate"],["type","date","id","reviewEndDate","formControlName","review_end_date",1,"form-control"],["for","notificationDate"],["type","date","id","notificationDate","formControlName","notification_date",1,"form-control"],["for","disbursementDate"],["type","date","id","disbursementDate","formControlName","disbursement_date",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-default",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.bsModalRef.hide()}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4)(7,"form",5)(8,"div",6)(9,"label",7),t._uU(10,"Bursary Name"),t.qZA(),t._UZ(11,"input",8),t.qZA(),t.TgZ(12,"div",6)(13,"label",9),t._uU(14,"Bursary Description"),t.qZA(),t._UZ(15,"textarea",10),t.qZA(),t.TgZ(16,"div",6)(17,"label",11),t._uU(18,"Bursary Amount(KES)"),t.qZA(),t._UZ(19,"input",12),t.qZA(),t.TgZ(20,"div",6)(21,"label",13),t._uU(22,"Criteria"),t.qZA(),t._UZ(23,"input",14),t.qZA(),t.TgZ(24,"div",15)(25,"div",16)(26,"div",6)(27,"label",17),t._uU(28,"Application Start Date"),t.qZA(),t._UZ(29,"input",18),t.qZA()(),t.TgZ(30,"div",16)(31,"div",6)(32,"label",19),t._uU(33,"Application End Date"),t.qZA(),t._UZ(34,"input",20),t.qZA()()(),t.TgZ(35,"div",15)(36,"div",16)(37,"div",6)(38,"label",21),t._uU(39,"Review Start Date"),t.qZA(),t._UZ(40,"input",22),t.qZA()(),t.TgZ(41,"div",16)(42,"div",6)(43,"label",23),t._uU(44,"Review End Date"),t.qZA(),t._UZ(45,"input",24),t.qZA()()(),t.TgZ(46,"div",15)(47,"div",16)(48,"div",6)(49,"label",25),t._uU(50,"Notification Date"),t.qZA(),t._UZ(51,"input",26),t.qZA()(),t.TgZ(52,"div",16)(53,"div",6)(54,"label",27),t._uU(55,"Disbursement Date"),t.qZA(),t._UZ(56,"input",28),t.qZA()()()()(),t.TgZ(57,"div",29)(58,"button",30),t.NdJ("click",function(){return n.submit()}),t._uU(59," Submit "),t.qZA(),t.TgZ(60,"button",31),t.NdJ("click",function(){return n.bsModalRef.hide()}),t._uU(61),t.qZA()()),2&e&&(t.xp6(2),t.Oqu(n.title),t.xp6(5),t.Q6J("formGroup",n.bursaryForm),t.xp6(54),t.hij(" ",n.closeBtnName," "))},dependencies:[l._Y,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u]}),a})(),P=(()=>{var s;class a{constructor(e,n,r){this.bsModalRef=e,this.httpService=n,this.toastr=r,this.studRef="",this.list=[]}ngOnInit(){this.wardApprovalForm=new l.cw({amount:new l.NI({value:this.apprStat?"":0,disabled:!this.apprStat},[l.kI.required]),status:new l.NI({value:this.apprStat?"APPROVED":"REJECTED",disabled:!0},[l.kI.required])})}submit(){console.log(this.wardApprovalForm.value);let e={studentId:this.studRef,awardedAmount:this.wardApprovalForm.controls.amount.value,approvalStatus:this.wardApprovalForm.controls.status.value};"REJECTED"===this.wardApprovalForm.value.status&&(e.awardedAmount=0),this.httpService.postReq("bursary/ward-approval",e).subscribe({next:n=>{this.toastr.success("Action successful"),this.bsModalRef.hide()},error:n=>{this.toastr.error(n)}})}}return(s=a).\u0275fac=function(e){return new(e||s)(t.Y36(C),t.Y36(b.G),t.Y36(A._W))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-approve-student"]],decls:25,vars:4,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"m-2",3,"formGroup"],[1,"form-group"],["for","amount"],["type","number","id","amount","placeholder","Enter approval amount","formControlName","amount",1,"form-control"],["for","status"],["formControlName","status",1,"form-control"],["value","APPROVED","selected","selected"],["value","REJECTED"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"disabled","click"],["type","button",1,"btn","btn-default",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h5",1),t._uU(2),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.bsModalRef.hide()}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4)(7,"form",5)(8,"div",6)(9,"label",7),t._uU(10,"Approval Amount"),t.qZA(),t._UZ(11,"input",8),t.qZA(),t.TgZ(12,"div",6)(13,"label",9),t._uU(14,"Status"),t.qZA(),t.TgZ(15,"select",10)(16,"option",11),t._uU(17,"APPROVED"),t.qZA(),t.TgZ(18,"option",12),t._uU(19,"REJECTED"),t.qZA()()()()(),t.TgZ(20,"div",13)(21,"button",14),t.NdJ("click",function(){return n.submit()}),t._uU(22," Submit "),t.qZA(),t.TgZ(23,"button",15),t.NdJ("click",function(){return n.bsModalRef.hide()}),t._uU(24),t.qZA()()),2&e&&(t.xp6(2),t.Oqu(n.title),t.xp6(5),t.Q6J("formGroup",n.wardApprovalForm),t.xp6(14),t.Q6J("disabled",!!n.apprStat&&!n.wardApprovalForm.valid),t.xp6(3),t.hij(" ",n.closeBtnName," "))},dependencies:[l._Y,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l.JJ,l.JL,l.sg,l.u]}),a})();function me(s,a){if(1&s){const o=t.EpF();t.TgZ(0,"div",11)(1,"h5",12),t._uU(2,"Document Details"),t.qZA(),t.TgZ(3,"p")(4,"strong"),t._uU(5,"Declaration Form :"),t.qZA(),t.TgZ(6,"button",19),t.NdJ("click",function(){t.CHM(o);const n=t.oxw(2);return t.KtG(n.viewDoc("declForm"))}),t._UZ(7,"i",20),t.qZA()(),t.TgZ(8,"p")(9,"strong"),t._uU(10,"Parent(s)/Guardian ID :"),t.qZA(),t.TgZ(11,"button",19),t.NdJ("click",function(){t.CHM(o);const n=t.oxw(2);return t.KtG(n.viewDoc("parentIds"))}),t._UZ(12,"i",20),t.qZA()(),t.TgZ(13,"p")(14,"strong"),t._uU(15,"Student ID :"),t.qZA(),t.TgZ(16,"button",19),t.NdJ("click",function(){t.CHM(o);const n=t.oxw(2);return t.KtG(n.viewDoc("studId"))}),t._UZ(17,"i",20),t.qZA()(),t.TgZ(18,"p")(19,"strong"),t._uU(20,"Birth Certificate :"),t.qZA(),t.TgZ(21,"button",19),t.NdJ("click",function(){t.CHM(o);const n=t.oxw(2);return t.KtG(n.viewDoc("studBirthCert"))}),t._UZ(22,"i",20),t.qZA()(),t.TgZ(23,"p")(24,"strong"),t._uU(25,"Parent(s) Death Certificate : "),t.qZA(),t.TgZ(26,"button",19),t.NdJ("click",function(){t.CHM(o);const n=t.oxw(2);return t.KtG(n.viewDoc("parentDeathCert"))}),t._UZ(27,"i",20),t.qZA()(),t.TgZ(28,"p")(29,"strong"),t._uU(30,"Transcripts : "),t.qZA(),t.TgZ(31,"button",19),t.NdJ("click",function(){t.CHM(o);const n=t.oxw(2);return t.KtG(n.viewDoc("transcripts"))}),t._UZ(32,"i",20),t.qZA()(),t.TgZ(33,"p")(34,"strong"),t._uU(35,"Admission Letter : "),t.qZA(),t.TgZ(36,"button",19),t.NdJ("click",function(){t.CHM(o);const n=t.oxw(2);return t.KtG(n.viewDoc("admLett"))}),t._UZ(37,"i",20),t.qZA()(),t.TgZ(38,"p")(39,"strong"),t._uU(40,"Leaving Certificate : "),t.qZA(),t.TgZ(41,"button",19),t.NdJ("click",function(){t.CHM(o);const n=t.oxw(2);return t.KtG(n.viewDoc("leavCert"))}),t._UZ(42,"i",20),t.qZA()(),t.TgZ(43,"p")(44,"strong"),t._uU(45,"Fee Structure : "),t.qZA(),t.TgZ(46,"button",19),t.NdJ("click",function(){t.CHM(o);const n=t.oxw(2);return t.KtG(n.viewDoc("feeStruct"))}),t._UZ(47,"i",20),t.qZA()()()}}function he(s,a){if(1&s){const o=t.EpF();t.TgZ(0,"section",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"h5",12),t._uU(6),t.qZA(),t.TgZ(7,"p")(8,"strong"),t._uU(9,"Gender : "),t.qZA(),t.TgZ(10,"span"),t._uU(11),t.qZA()(),t.TgZ(12,"p")(13,"strong"),t._uU(14,"Phone : "),t.qZA(),t._uU(15),t.qZA(),t.TgZ(16,"p")(17,"strong"),t._uU(18,"Date of Birth : "),t.qZA(),t._uU(19),t.ALo(20,"date"),t.qZA(),t.TgZ(21,"p")(22,"strong"),t._uU(23,"Year of Study : "),t.qZA(),t._uU(24),t.qZA(),t.TgZ(25,"p")(26,"strong"),t._uU(27,"Course : "),t.qZA(),t._uU(28),t.qZA(),t.TgZ(29,"p")(30,"strong"),t._uU(31,"Constituency : "),t.qZA(),t._uU(32),t.qZA(),t.TgZ(33,"p")(34,"strong"),t._uU(35,"Ward : "),t.qZA(),t._uU(36),t.qZA(),t.TgZ(37,"p")(38,"strong"),t._uU(39,"Village : "),t.qZA(),t._uU(40),t.qZA()()()(),t.TgZ(41,"div",9)(42,"div",10)(43,"div",11)(44,"h5",12),t._uU(45,"School"),t.qZA(),t.TgZ(46,"p")(47,"strong"),t._uU(48,"School/Institution :"),t.qZA(),t._uU(49),t.qZA(),t.TgZ(50,"p")(51,"strong"),t._uU(52,"Bank Name :"),t.qZA(),t._uU(53),t.qZA(),t.TgZ(54,"p")(55,"strong"),t._uU(56,"Bank Account No :"),t.qZA(),t._uU(57),t.qZA(),t.TgZ(58,"p")(59,"strong"),t._uU(60,"Bank Branch :"),t.qZA(),t._uU(61),t.qZA()()()(),t.TgZ(62,"div",9)(63,"div",10)(64,"div",11)(65,"h5",12),t._uU(66,"Parents/Guardians"),t.qZA(),t._UZ(67,"hr"),t.TgZ(68,"p")(69,"strong"),t._uU(70,"Father Guardian name :"),t.qZA(),t._uU(71),t.qZA(),t.TgZ(72,"p")(73,"strong"),t._uU(74,"Father Guardian occupation :"),t.qZA(),t._uU(75),t.qZA(),t.TgZ(76,"p")(77,"strong"),t._uU(78,"Father Guardian phone :"),t.qZA(),t._uU(79),t.qZA(),t._UZ(80,"hr"),t.TgZ(81,"p")(82,"strong"),t._uU(83,"Mother Guardian name :"),t.qZA(),t._uU(84),t.qZA(),t.TgZ(85,"p")(86,"strong"),t._uU(87,"Mother Guardian occupation :"),t.qZA(),t._uU(88),t.qZA(),t.TgZ(89,"p")(90,"strong"),t._uU(91,"Mother Guardian phone :"),t.qZA(),t._uU(92),t.qZA()()()()(),t.TgZ(93,"div",8)(94,"div",9)(95,"div",10)(96,"div",11)(97,"h5",12),t._uU(98,"Sponsor Details"),t.qZA(),t.TgZ(99,"p")(100,"strong"),t._uU(101,"Sponsor Name :"),t.qZA(),t._uU(102),t.qZA(),t.TgZ(103,"p")(104,"strong"),t._uU(105,"Sponsor Occupation :"),t.qZA(),t._uU(106),t.qZA(),t.TgZ(107,"p")(108,"strong"),t._uU(109,"Sponsor Phone :"),t.qZA(),t._uU(110),t.qZA(),t.TgZ(111,"p")(112,"strong"),t._uU(113,"Sponsor Relationship :"),t.qZA(),t._uU(114),t.qZA(),t.TgZ(115,"p")(116,"strong"),t._uU(117,"Sponsor children(s) : "),t.qZA(),t.TgZ(118,"span",13),t._uU(119),t.qZA()()()()(),t.TgZ(120,"div",9)(121,"div",10),t.YNc(122,me,48,0,"div",14),t.ALo(123,"async"),t.qZA()(),t.TgZ(124,"div",9)(125,"div",10)(126,"div",11)(127,"h5",12),t._uU(128,"Approval Details"),t.qZA(),t.TgZ(129,"p",15)(130,"strong"),t._uU(131,"Ward Stage : "),t.qZA(),t.TgZ(132,"span",16),t._uU(133),t.qZA()(),t._UZ(134,"hr"),t.TgZ(135,"p",15)(136,"strong"),t._uU(137,"County Stage : "),t.qZA(),t.TgZ(138,"span",16),t._uU(139),t.qZA()(),t._UZ(140,"hr"),t.TgZ(141,"p",15)(142,"strong"),t._uU(143,"Ministry Stage : "),t.qZA(),t.TgZ(144,"span",16),t._uU(145),t.qZA()()()(),t.TgZ(146,"div",10)(147,"div",11)(148,"h5",12),t._uU(149,"Approval Actions"),t.qZA(),t.TgZ(150,"p",15)(151,"button",17),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.approve())}),t._uU(152," Approve "),t.qZA(),t.TgZ(153,"button",18),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.reject())}),t._uU(154," Reject "),t.qZA()(),t._UZ(155,"hr"),t.qZA()()()()()}if(2&s){const o=t.oxw();t.xp6(6),t.Oqu(o.studDetails.name),t.xp6(4),t.Tol("M"===o.studDetails.gender?"badge bg-success mr-1":"badge bg-primary mr-1"),t.xp6(1),t.hij(" ","M"===o.studDetails.gender?"Male":"Female"," "),t.xp6(4),t.hij(" ",o.studDetails.phone,""),t.xp6(4),t.hij(" ",t.lcZ(20,33,o.studDetails.dob)," "),t.xp6(5),t.hij(" ",o.studDetails.formYear,""),t.xp6(4),t.hij(" ",o.studDetails.course,""),t.xp6(4),t.hij(" ",o.studDetails.constituency," "),t.xp6(4),t.hij(" ",o.studDetails.ward,""),t.xp6(4),t.hij(" ",o.studDetails.village,""),t.xp6(9),t.hij(" ",o.studDetails.instName," "),t.xp6(4),t.hij(" ",o.studDetails.instBank,""),t.xp6(4),t.hij(" ",o.studDetails.instAccNo," "),t.xp6(4),t.hij(" ",o.studDetails.instBranch," "),t.xp6(10),t.hij(" ",o.studDetails.fatherName," "),t.xp6(4),t.hij(" ",o.studDetails.fatherOcc," "),t.xp6(4),t.hij(" ",o.studDetails.fatherPhone," "),t.xp6(5),t.hij(" ",o.studDetails.motherName," "),t.xp6(4),t.hij(" ",o.studDetails.motherOcc," "),t.xp6(4),t.hij(" ",o.studDetails.motherPhone," "),t.xp6(10),t.hij(" ",o.studDetails.sponsorName," "),t.xp6(4),t.hij(" ",o.studDetails.sponsorOccupation," "),t.xp6(4),t.hij(" ",o.studDetails.sponsorPhone," "),t.xp6(4),t.hij(" ",o.studDetails.sponsorRelationship," "),t.xp6(5),t.hij(" ",o.studDetails.sponsorChildrenNum," "),t.xp6(3),t.Q6J("ngIf",t.lcZ(123,35,o.filesList$)),t.xp6(11),t.hij(" ",o.studDetails.wardStage," "),t.xp6(6),t.hij(" ",o.studDetails.countyStage," "),t.xp6(6),t.hij(" ",o.studDetails.ministryStage," "),t.xp6(6),t.Q6J("disabled","PENDING"!==o.studDetails.wardStage),t.xp6(2),t.Q6J("disabled","PENDING"!==o.studDetails.wardStage)}}let _e=(()=>{var s;class a{constructor(e,n,r,i,c,d){this.httpService=e,this.globalService=n,this.toastr=r,this.router=i,this.route=c,this.modalService=d,this.loading=!0,this.rows=[],this.filteredRows=[],this.defaultNavActiveId=1,this.bursariesList$=(0,u.of)([]),this.filesList$=(0,u.of)([]),this.title="Assessor",this.actions=["View","Edit"],this.totalRecords=0,this.subs=[],this.studRef="",this.route.paramMap.subscribe(m=>{this.studRef=m.get("id").toString(),console.log(this.studRef)})}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}ngOnInit(){this.getIndividualData(),this.getIndividualFiles()}getIndividualData(e=0,n=50){this.loading=!0,this.bursariesList$=this.httpService.getReq(`bursary/student/${this.studRef}`).pipe((0,T.U)(i=>(this.studDetails=i.data,this.studDetails)),(0,f.K)(i=>(this.loading=!1,i instanceof g?this.toastr.error(i.message,"API Timeout"):this.toastr.error(i.statusText||i.message,"Data Not Fetched"),(0,u.of)([]))))}getIndividualFiles(){this.loading=!0,this.filesList$=this.httpService.getReq(`bursary/student/files/${this.studRef}`).pipe((0,T.U)(e=>(console.log(e),console.log(e),this.studFiles=e.data[0],this.studFiles)),(0,f.K)(e=>(this.loading=!1,e instanceof g?this.toastr.error(e.message,"API Timeout"):this.toastr.error(e.statusText||e.message,"Data Not Fetched"),(0,u.of)([]))))}triggerEvent(e){let n=JSON.parse(e);"View"==n.action||"Edit"==n.action&&this.editAssessor(n.row)}updateFilteredRowsEvent(e){this.filteredRows=e}addBursary(){this.bsModalRef=this.modalService.show(U,{initialState:{title:"Add Bursary"},class:"modal-lg"}),this.bsModalRef.content.closeBtnName="Close",this.bsModalRef.content.isEdit=!1,this.bsModalRef.onHidden?.emit(n=>{console.log(n),this.getIndividualData()})}addAssessor(){}editAssessor(e){}approve(){this.bsModalRef=this.modalService.show(P,{initialState:{title:`Approve Student : ${this.studRef}`,apprStat:!0,studRef:this.studRef},class:"modal-md"}),this.bsModalRef.content.closeBtnName="Close",this.bsModalRef.onHide?.subscribe(n=>{console.log(n),this.getIndividualData()})}reject(){this.bsModalRef=this.modalService.show(P,{initialState:{title:`Reject Student : ${this.studRef}`,apprStat:!1,studRef:this.studRef},class:"modal-md"}),this.bsModalRef.content.closeBtnName="Close",this.bsModalRef.onHide?.subscribe(n=>{console.log(n),this.getIndividualData()})}viewDoc(e){console.log(this.studFiles[e]),this.httpService.getFileReq(`bursary/student/file/${this.studFiles[e]}`).subscribe(n=>{let r=new Blob([n],{type:"application/pdf"});const i=URL.createObjectURL(r);window.open(i,"_blank")})}}return(s=a).\u0275fac=function(e){return new(e||s)(t.Y36(b.G),t.Y36(S.s),t.Y36(A._W),t.Y36(v.F0),t.Y36(v.gz),t.Y36(Z))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-view-student"]],decls:13,vars:3,consts:[[1,"pagetitle"],[1,"d-flex","flex-row","justify-content-between","align-items-center"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/bursary/students"],[1,"breadcrumb-item","active"],["class","section",4,"ngIf"],[1,"section"],[1,"row"],[1,"col-lg-4"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"badge","bg-primary","mr-1"],["class","card-body",4,"ngIf"],[1,"d-flex","justify-content-between"],[1,"badge","bg-info","mr-1"],["type","button",1,"btn","btn-success","btn-sm","mx-3",3,"disabled","click"],["type","button",1,"btn","btn-danger","btn-sm","mx-3",3,"disabled","click"],["type","button",1,"btn","btn-primary","btn-sm","mx-3",3,"click"],[1,"bi","bi-eye"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Student Page"),t.qZA(),t.TgZ(3,"div",1)(4,"nav")(5,"ol",2)(6,"li",3)(7,"a",4),t._uU(8,"All Students"),t.qZA()(),t.TgZ(9,"li",5),t._uU(10,"Student"),t.qZA()()()()(),t.YNc(11,he,156,37,"section",6),t.ALo(12,"async")),2&e&&(t.xp6(11),t.Q6J("ngIf",t.lcZ(12,1,n.bursariesList$)))},dependencies:[p.O5,v.rH,p.Ov,p.uU]}),a})();function ge(s,a){1&s&&t.GkF(0)}let fe=(()=>{var s;class a{constructor(e,n,r,i,c){this.httpService=e,this.globalService=n,this.toastr=r,this.router=i,this.modalService=c,this.loading=!0,this.rows=[],this.filteredRows=[],this.defaultNavActiveId=1,this.columns=[{name:"Full Name",prop:"name"},{name:"Gender",prop:"gender"},{name:"DOB",prop:"dob"},{name:"Form/Year",prop:"formYear"},{name:"Mobile No",prop:"phone"},{name:"Course",prop:"course"},{name:"Ward",prop:"ward"},{name:"Village",prop:"village"},{name:"County Stage",prop:"countyStage"},{name:"Actions",prop:"_id"}],this.allColumns=[...this.columns],this.studentsList$=(0,u.of)([]),this.studentsToApprove=[],this.title="Assessor",this.actions=["View"],this.totalRecords=0,this.subs=[]}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}ngOnInit(){this.getIndividualData()}getIndividualData(e=0,n=50){this.loading=!0,this.studentsList$=this.httpService.getReq("bursary/students").pipe((0,T.U)(i=>(console.log(i),console.log(i),200===i.statusCode?(this.rows=i.data.map((d,m)=>{if("APPROVED"===d.wardStage)return d.dob=this.globalService.formatDate(d.dob),{...d,frontendId:m+1}}),this.rows=this.rows.filter(d=>void 0!==d),console.log(this.rows),this.totalRecords=this.rows.length,this.loading=!1,this.rows):(this.loading=!1,(0,u.of)([])))),(0,f.K)(i=>(this.loading=!1,i instanceof g?this.toastr.error(i.message,"API Timeout"):this.toastr.error(i.statusText||i.message,"Data Not Fetched"),(0,u.of)([]))))}updateColumns(e){this.columns=[...e]}triggerEvent(e){let n=JSON.parse(e);"View"==n.action&&(console.log(n.row),this.router.navigate([`bursary/student/ward-status/${n.row._id}`]))}updateFilteredRowsEvent(e){this.filteredRows=e}selectedRowsEvent(e){this.studentsToApprove=e,this.studentsToApprove=[...this.studentsToApprove].filter(n=>"APPROVED"===n.countyStage)}bulkApproval(){this.studentsToApprove.length>0?(this.bsModalRef=this.modalService.show(W,{initialState:{title:"Approve Students : County Level",countyAppr:!0,studList:this.studentsToApprove},class:"modal-md"}),this.bsModalRef.content.closeBtnName="Close",this.bsModalRef.onHidden?.emit(n=>{console.log(n),this.getIndividualData()})):this.toastr.info("Select multiple students that match the final document to upload")}}return(s=a).\u0275fac=function(e){return new(e||s)(t.Y36(b.G),t.Y36(S.s),t.Y36(A._W),t.Y36(v.F0),t.Y36(Z))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-list-all-students"]],decls:22,vars:8,consts:[[1,"pagetitle"],[1,"d-flex","justify-content-between","align-items-center"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","/admin/dashboard"],[1,"breadcrumb-item","active"],[1,"btn","bg-primary",3,"click"],[1,"text-white"],[1,"section"],[1,"d-flex","justify-content-end"],[1,"row"],[1,"col-md-12"],[1,"card","p-1"],[4,"ngIf"],[3,"columns","rows","actions","loadingIndicator","totalItems","outputEvent","selectedRowsEvent","updateFilteredRows"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"County Level - Students Page"),t.qZA(),t.TgZ(3,"div",1)(4,"nav")(5,"ol",2)(6,"li",3)(7,"a",4),t._uU(8,"Dashboard"),t.qZA()(),t.TgZ(9,"li",5),t._uU(10,"Students Approved from All Wards"),t.qZA()()(),t.TgZ(11,"button",6),t.NdJ("click",function(){return n.bulkApproval()}),t.TgZ(12,"p",7),t._uU(13,"Approve Students"),t.qZA()()()(),t.TgZ(14,"section",8),t._UZ(15,"div",9),t.TgZ(16,"div",10)(17,"div",11)(18,"div",12),t.YNc(19,ge,1,0,"ng-container",13),t.ALo(20,"async"),t.TgZ(21,"app-custom-tbl",14),t.NdJ("outputEvent",function(i){return n.triggerEvent(i)})("selectedRowsEvent",function(i){return n.selectedRowsEvent(i)})("updateFilteredRows",function(i){return n.updateFilteredRowsEvent(i)}),t.qZA()()()()()),2&e&&(t.xp6(19),t.Q6J("ngIf",t.lcZ(20,6,n.studentsList$)),t.xp6(2),t.Q6J("columns",n.columns)("rows",n.rows)("actions",n.actions)("loadingIndicator",!1)("totalItems",n.totalRecords))},dependencies:[p.O5,k,p.Ov]}),a})();function be(s,a){if(1&s&&(t.TgZ(0,"option",26),t._uU(1),t.qZA()),2&s){const o=a.$implicit;t.Q6J("value",o.constituency),t.xp6(1),t.hij(" ",o.constituency," ")}}function ve(s,a){if(1&s&&(t.TgZ(0,"option",26),t._uU(1),t.qZA()),2&s){const o=a.$implicit;t.Q6J("value",o),t.xp6(1),t.hij(" ",o," ")}}let Ae=(()=>{var s;class a{constructor(e,n,r){this.bsModalRef=e,this.httpService=n,this.toastr=r,this.migoriConstData=[{constituency:"Rongo",wards:["North Kamagambo","Central Kamagambo","East Kamagambo","South Kamagambo"]},{constituency:"Awendo",wards:["North East Sakwa","South Sakwa","West Sakwa","Central Sakwa"]},{constituency:"Suna East",wards:["God Jope","Suna Central","Kakrao","Kwa"]},{constituency:"Suna West",wards:["Wiga","Wasweta II","Ragan-Oruba","Wasimbete"]},{constituency:"Uriri",wards:["West Kanyamkago","North Kanyamkago","Central Kanyamkago","South Kanyamkago","East Kanyamkago"]},{constituency:"Kuria East",wards:["Gokeharaka/Getamwega","Ntimaru West","Ntimaru East","Nyabasi East","Nyabasi West"]},{constituency:"Nyatike",wards:["Kachieng\u2019","Kanyasa","North Kadem","Macalder/Kanyarwanda","Kaler","Got Kachola","Muhuru"]},{constituency:"Kuria West",wards:["Bukira East","Bukira Central/Ikerege","Isibania","Makerero","Masaba","Tagare","Nyamosense/Komosoko"]}],this.isEdit=!1,this.list=[]}ngOnInit(){this.bursaryForm=new l.cw({email:new l.NI("",[l.kI.required]),name:new l.NI("",[l.kI.required]),idNo:new l.NI("",[l.kI.required]),mobile:new l.NI("",[l.kI.required]),constituency:new l.NI("",[l.kI.required]),ward:new l.NI("",[l.kI.required])})}filterWards(){let e=this.bursaryForm.controls.constituency.value;this.selectedWards=[...this.migoriConstData].filter(n=>n.constituency==e)[0].wards,console.log(this.selectedWards)}submit(){this.isEdit?console.log(this.bursaryForm.value):(console.log("this.bursaryForm.value"),this.httpService.postAuthReq("auth/users/ward",{email:this.bursaryForm.controls.email.value,name:this.bursaryForm.controls.name.value,idNo:this.bursaryForm.controls.idNo.value,mobile:this.bursaryForm.controls.mobile.value,ward:this.bursaryForm.controls.ward.value,password:"qwerty"}).subscribe({next:r=>{console.log(r),r?(this.bsModalRef.hide(),this.bsModalRef.onHide?.emit(r),this.toastr.success(r.message,"Ward user created")):this.toastr.error(r.message,"Assessor Not Staged")},error:r=>{}}))}}return(s=a).\u0275fac=function(e){return new(e||s)(t.Y36(C),t.Y36(b.G),t.Y36(A._W))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-add-ward-users"]],decls:49,vars:5,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"m-2",3,"formGroup"],[1,"form-group"],["for","bursaryName"],["type","email","id","email","placeholder","Enter email","formControlName","email",1,"form-control"],["for","idNo"],["type","idNo","id","idNo","placeholder","Enter ID Number","formControlName","idNo",1,"form-control"],[1,"row","my-1"],[1,"col-md-6"],["for","constit",1,"mx-1"],["formControlName","constituency","required","",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","bursaryName",1,"mx-1"],["formControlName","ward","required","",1,"form-control"],["for","name"],["type","text","id","name","placeholder","Enter name","formControlName","name",1,"form-control"],["for","mobile"],["type","text","id","mobile","placeholder","Enter mobile","formControlName","mobile",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-default",3,"click"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.bsModalRef.hide()}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4)(7,"form",5)(8,"div",6)(9,"label",7),t._uU(10,"Email"),t.qZA(),t._UZ(11,"input",8),t.qZA(),t.TgZ(12,"div",6)(13,"label",9),t._uU(14,"ID Number"),t.qZA(),t._UZ(15,"input",10),t.qZA(),t.TgZ(16,"div",11)(17,"div",12)(18,"div",6)(19,"label",13),t._uU(20,"Constituency"),t.qZA(),t.TgZ(21,"select",14),t.NdJ("change",function(){return n.filterWards()}),t.TgZ(22,"option",15),t._uU(23,"Select One"),t.qZA(),t.YNc(24,be,2,2,"option",16),t.qZA()()(),t.TgZ(25,"div",12)(26,"div",6)(27,"label",17),t._uU(28,"Ward"),t.qZA(),t.TgZ(29,"select",18)(30,"option",15),t._uU(31,"Select One"),t.qZA(),t.YNc(32,ve,2,2,"option",16),t.qZA()()()(),t.TgZ(33,"div",11)(34,"div",12)(35,"div",6)(36,"label",19),t._uU(37,"name"),t.qZA(),t._UZ(38,"input",20),t.qZA()(),t.TgZ(39,"div",12)(40,"div",6)(41,"label",21),t._uU(42,"Mobile No"),t.qZA(),t._UZ(43,"input",22),t.qZA()()()()(),t.TgZ(44,"div",23)(45,"button",24),t.NdJ("click",function(){return n.submit()}),t._uU(46," Submit "),t.qZA(),t.TgZ(47,"button",25),t.NdJ("click",function(){return n.bsModalRef.hide()}),t._uU(48),t.qZA()()),2&e&&(t.xp6(2),t.Oqu(n.title),t.xp6(5),t.Q6J("formGroup",n.bursaryForm),t.xp6(17),t.Q6J("ngForOf",n.migoriConstData),t.xp6(8),t.Q6J("ngForOf",n.selectedWards),t.xp6(16),t.hij(" ",n.closeBtnName," "))},dependencies:[p.sg,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.Q7,l.sg,l.u]}),a})();function we(s,a){1&s&&t.GkF(0)}let Te=(()=>{var s;class a{constructor(e,n,r,i,c){this.httpService=e,this.globalService=n,this.toastr=r,this.router=i,this.modalService=c,this.loading=!0,this.rows=[],this.filteredRows=[],this.defaultNavActiveId=1,this.columns=[{name:"Name",prop:"name"},{name:"Email",prop:"email"},{name:"ID No",prop:"idNo"},{name:"Mobile No",prop:"mobile"},{name:"Ward",prop:"ward"}],this.allColumns=[...this.columns],this.studentsList$=(0,u.of)([]),this.title="Assessor",this.actions=["View"],this.totalRecords=0,this.subs=[]}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}ngOnInit(){this.getIndividualData()}getIndividualData(e=0,n=50){this.loading=!0,this.studentsList$=this.httpService.getAuthReq("auth/users/all").pipe((0,T.U)(i=>(console.log(i),console.log(i),200===i.statusCode?(this.rows=i.data.map((d,m)=>{if("WARD"===d.profile)return{...d,frontendId:m+1}}),this.rows=this.rows.filter(d=>void 0!==d),console.log(this.rows),this.totalRecords=this.rows.length,this.loading=!1,this.rows):(this.loading=!1,(0,u.of)([])))),(0,f.K)(i=>(this.loading=!1,i instanceof g?this.toastr.error(i.message,"API Timeout"):this.toastr.error(i.statusText||i.message,"Data Not Fetched"),(0,u.of)([]))))}updateColumns(e){this.columns=[...e]}triggerEvent(e){let n=JSON.parse(e);"View"==n.action?(console.log(n.row),this.router.navigate([`bursary/student/${n.row._id}`])):"Edit"==n.action&&this.editAssessor(n.row)}updateFilteredRowsEvent(e){this.filteredRows=e}addUser(){this.bsModalRef=this.modalService.show(Ae,{initialState:{title:"Add Ward User",isEdit:!1}}),this.bsModalRef.content.closeBtnName="Close",this.bsModalRef.onHide?.subscribe(n=>{console.log(n),this.getIndividualData()})}editAssessor(e){}}return(s=a).\u0275fac=function(e){return new(e||s)(t.Y36(b.G),t.Y36(S.s),t.Y36(A._W),t.Y36(v.F0),t.Y36(Z))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-list-ward-users"]],decls:22,vars:8,consts:[[1,"pagetitle"],[1,"d-flex","justify-content-between","align-items-center"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","/admin/dashboard"],[1,"breadcrumb-item","active"],[1,"btn","bg-primary",3,"click"],[1,"text-white"],[1,"section"],[1,"d-flex","justify-content-end"],[1,"row"],[1,"col-md-12"],[1,"card","p-1"],[4,"ngIf"],[3,"columns","rows","actions","loadingIndicator","totalItems","outputEvent","updateFilteredRows"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Users Page"),t.qZA(),t.TgZ(3,"div",1)(4,"nav")(5,"ol",2)(6,"li",3)(7,"a",4),t._uU(8,"Dashboard"),t.qZA()(),t.TgZ(9,"li",5),t._uU(10,"Ward Users"),t.qZA()()(),t.TgZ(11,"button",6),t.NdJ("click",function(){return n.addUser()}),t.TgZ(12,"p",7),t._uU(13,"Add Ward User"),t.qZA()()()(),t.TgZ(14,"section",8),t._UZ(15,"div",9),t.TgZ(16,"div",10)(17,"div",11)(18,"div",12),t.YNc(19,we,1,0,"ng-container",13),t.ALo(20,"async"),t.TgZ(21,"app-custom-tbl",14),t.NdJ("outputEvent",function(i){return n.triggerEvent(i)})("updateFilteredRows",function(i){return n.updateFilteredRowsEvent(i)}),t.qZA()()()()()),2&e&&(t.xp6(19),t.Q6J("ngIf",t.lcZ(20,6,n.studentsList$)),t.xp6(2),t.Q6J("columns",n.columns)("rows",n.rows)("actions",n.actions)("loadingIndicator",!1)("totalItems",n.totalRecords))},dependencies:[p.O5,k,p.Ov]}),a})();function ye(s,a){1&s&&t.GkF(0)}let Ze=(()=>{var s;class a{constructor(e,n,r,i,c){this.httpService=e,this.globalService=n,this.toastr=r,this.router=i,this.modalService=c,this.loading=!0,this.rows=[],this.filteredRows=[],this.defaultNavActiveId=1,this.columns=[{name:"Ref",prop:"_id"},{name:"Level",prop:"ward"},{name:"Filename",prop:"approvalForm"},{name:"Actions",prop:"_id"}],this.allColumns=[...this.columns],this.bulkApprList$=(0,u.of)([]),this.title="Assessor",this.actions=["View"],this.totalRecords=0,this.subs=[]}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}ngOnInit(){this.getIndividualData()}getIndividualData(e=0,n=50){this.loading=!0,this.bulkApprList$=this.httpService.getReq("bursary/bulk-approved").pipe((0,T.U)(i=>(console.log(i),console.log(i),200===i.statusCode?(this.rows=i.data.map((d,m)=>({...d,frontendId:m+1})),this.rows=this.rows.filter(d=>void 0!==d),console.log(this.rows),this.totalRecords=this.rows.length,this.loading=!1,this.rows):(this.loading=!1,(0,u.of)([])))),(0,f.K)(i=>(this.loading=!1,i instanceof g?this.toastr.error(i.message,"API Timeout"):this.toastr.error(i.statusText||i.message,"Data Not Fetched"),(0,u.of)([]))))}updateColumns(e){this.columns=[...e]}triggerEvent(e){let n=JSON.parse(e);"View"==n.action&&this.viewDoc(n.row)}updateFilteredRowsEvent(e){this.filteredRows=e}addStudent(){this.bsModalRef=this.modalService.show(U,{initialState:{title:"Add Bursary"},class:"modal-lg"}),this.bsModalRef.content.closeBtnName="Close",this.bsModalRef.content.isEdit=!1,this.bsModalRef.onHidden?.emit(n=>{console.log(n),this.getIndividualData()})}viewDoc(e){this.httpService.getFileReq(`bursary/student/file/${e.approvalForm}`).subscribe(n=>{let r=new Blob([n],{type:"application/pdf"});const i=URL.createObjectURL(r);window.open(i,"_blank")})}}return(s=a).\u0275fac=function(e){return new(e||s)(t.Y36(b.G),t.Y36(S.s),t.Y36(A._W),t.Y36(v.F0),t.Y36(Z))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-list-bulk-approved"]],decls:19,vars:8,consts:[[1,"pagetitle"],[1,"d-flex","justify-content-between","align-items-center"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","/admin/dashboard"],[1,"breadcrumb-item","active"],[1,"section"],[1,"d-flex","justify-content-end"],[1,"row"],[1,"col-md-12"],[1,"card","p-1"],[4,"ngIf"],[3,"columns","rows","actions","loadingIndicator","totalItems","outputEvent","updateFilteredRows"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Approved Documents Page"),t.qZA(),t.TgZ(3,"div",1)(4,"nav")(5,"ol",2)(6,"li",3)(7,"a",4),t._uU(8,"Dashboard"),t.qZA()(),t.TgZ(9,"li",5),t._uU(10,"Documents"),t.qZA()()()()(),t.TgZ(11,"section",6),t._UZ(12,"div",7),t.TgZ(13,"div",8)(14,"div",9)(15,"div",10),t.YNc(16,ye,1,0,"ng-container",11),t.ALo(17,"async"),t.TgZ(18,"app-custom-tbl",12),t.NdJ("outputEvent",function(i){return n.triggerEvent(i)})("updateFilteredRows",function(i){return n.updateFilteredRowsEvent(i)}),t.qZA()()()()()),2&e&&(t.xp6(16),t.Q6J("ngIf",t.lcZ(17,6,n.bulkApprList$)),t.xp6(2),t.Q6J("columns",n.columns)("rows",n.rows)("actions",n.actions)("loadingIndicator",!1)("totalItems",n.totalRecords))},dependencies:[p.O5,k,p.Ov]}),a})(),Se=(()=>{var s;class a{constructor(e,n,r){this.bsModalRef=e,this.httpService=n,this.toastr=r,this.studRef="",this.type="county",this.apprData=0,this.list=[]}ngOnInit(){this.countyApprovalForm=new l.cw({amount:new l.NI({value:this.apprData,disabled:!this.apprStat},[l.kI.required]),status:new l.NI({value:this.apprStat?"APPROVED":"REJECTED",disabled:!0},[l.kI.required])})}submit(){console.log(this.countyApprovalForm.value);let e={studentId:this.studRef,awardedAmount:this.countyApprovalForm.controls.amount.value,approvalStatus:this.countyApprovalForm.controls.status.value};"REJECTED"===this.countyApprovalForm.value.status&&(e.awardedAmount=0),this.httpService.postReq(`bursary/${this.type}-approval`,e).subscribe({next:n=>{this.toastr.success("Action successful"),this.bsModalRef.hide()},error:n=>{this.toastr.error(n)}})}}return(s=a).\u0275fac=function(e){return new(e||s)(t.Y36(C),t.Y36(b.G),t.Y36(A._W))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-appr-rej-stud-county-level"]],decls:25,vars:4,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"m-2",3,"formGroup"],[1,"form-group"],["for","amount"],["type","number","id","amount","placeholder","Enter approval amount","formControlName","amount",1,"form-control"],["for","status"],["formControlName","status",1,"form-control"],["value","APPROVED","selected","selected"],["value","REJECTED"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"disabled","click"],["type","button",1,"btn","btn-default",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h5",1),t._uU(2),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.bsModalRef.hide()}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4)(7,"form",5)(8,"div",6)(9,"label",7),t._uU(10,"Approval Amount"),t.qZA(),t._UZ(11,"input",8),t.qZA(),t.TgZ(12,"div",6)(13,"label",9),t._uU(14,"Status"),t.qZA(),t.TgZ(15,"select",10)(16,"option",11),t._uU(17,"APPROVED"),t.qZA(),t.TgZ(18,"option",12),t._uU(19,"REJECTED"),t.qZA()()()()(),t.TgZ(20,"div",13)(21,"button",14),t.NdJ("click",function(){return n.submit()}),t._uU(22," Submit "),t.qZA(),t.TgZ(23,"button",15),t.NdJ("click",function(){return n.bsModalRef.hide()}),t._uU(24),t.qZA()()),2&e&&(t.xp6(2),t.Oqu(n.title),t.xp6(5),t.Q6J("formGroup",n.countyApprovalForm),t.xp6(14),t.Q6J("disabled",!!n.apprStat&&!n.countyApprovalForm.valid),t.xp6(3),t.hij(" ",n.closeBtnName," "))},dependencies:[l._Y,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l.JJ,l.JL,l.sg,l.u]}),a})();function Ce(s,a){if(1&s&&(t.TgZ(0,"div",10)(1,"div",11)(2,"h5",13),t._uU(3,"Ward Stage Approval Details"),t.qZA(),t._UZ(4,"hr"),t.TgZ(5,"p")(6,"strong"),t._uU(7,"Approval Ref :"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"p")(10,"strong"),t._uU(11,"Amount :"),t.qZA(),t._uU(12),t.qZA()()()),2&s){const o=t.oxw(2);t.xp6(8),t.hij(" ",o.studWardStatus._id," "),t.xp6(4),t.hij(" KES ",o.studWardStatus.awardedAmount," ")}}function xe(s,a){if(1&s&&(t.TgZ(0,"div",10)(1,"div",11)(2,"h5",13),t._uU(3,"County Stage Approval Details"),t.qZA(),t._UZ(4,"hr"),t.TgZ(5,"p")(6,"strong"),t._uU(7,"Approval Ref :"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"p")(10,"strong"),t._uU(11,"Amount :"),t.qZA(),t._uU(12),t.qZA()()()),2&s){const o=t.oxw(2);t.xp6(8),t.hij(" ",o.studCountyStatus._id," "),t.xp6(4),t.hij(" KES ",o.studCountyStatus.awardedAmount," ")}}function ke(s,a){if(1&s){const o=t.EpF();t.TgZ(0,"section",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"div",12)(6,"h5",13),t._uU(7),t.qZA(),t.TgZ(8,"button",14),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.viewStudent())}),t._uU(9," View More Details "),t.qZA()(),t._UZ(10,"hr"),t.TgZ(11,"p")(12,"strong"),t._uU(13,"Gender : "),t.qZA(),t.TgZ(14,"span"),t._uU(15),t.qZA()(),t.TgZ(16,"p")(17,"strong"),t._uU(18,"Phone : "),t.qZA(),t._uU(19),t.qZA(),t.TgZ(20,"p")(21,"strong"),t._uU(22,"Date of Birth : "),t.qZA(),t._uU(23),t.ALo(24,"date"),t.qZA(),t.TgZ(25,"p")(26,"strong"),t._uU(27,"Year of Study : "),t.qZA(),t._uU(28),t.qZA(),t.TgZ(29,"p")(30,"strong"),t._uU(31,"Course : "),t.qZA(),t._uU(32),t.qZA(),t.TgZ(33,"p")(34,"strong"),t._uU(35,"Constituency : "),t.qZA(),t._uU(36),t.qZA(),t.TgZ(37,"p")(38,"strong"),t._uU(39,"Ward : "),t.qZA(),t._uU(40),t.qZA(),t.TgZ(41,"p")(42,"strong"),t._uU(43,"Village : "),t.qZA(),t._uU(44),t.qZA(),t.TgZ(45,"p")(46,"strong"),t._uU(47,"County Stage : "),t.qZA(),t.TgZ(48,"span",15),t._uU(49),t.qZA()()()()(),t.TgZ(50,"div",9)(51,"div",10)(52,"div",11)(53,"h5",13),t._uU(54,"School"),t.qZA(),t.TgZ(55,"p")(56,"strong"),t._uU(57,"School/Institution :"),t.qZA(),t._uU(58),t.qZA(),t.TgZ(59,"p")(60,"strong"),t._uU(61,"Bank Name :"),t.qZA(),t._uU(62),t.qZA(),t.TgZ(63,"p")(64,"strong"),t._uU(65,"Bank Account No :"),t.qZA(),t._uU(66),t.qZA(),t.TgZ(67,"p")(68,"strong"),t._uU(69,"Bank Branch :"),t.qZA(),t._uU(70),t.qZA()()()(),t.TgZ(71,"div",9),t.YNc(72,Ce,13,2,"div",16),t.ALo(73,"async"),t.YNc(74,xe,13,2,"div",16),t.ALo(75,"async"),t.TgZ(76,"div",10)(77,"div",11)(78,"h5",13),t._uU(79,"Approval Actions"),t.qZA(),t._UZ(80,"hr"),t.TgZ(81,"p",12)(82,"button",17),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.approveReject(!0))}),t._uU(83," Approve "),t.qZA(),t.TgZ(84,"button",18),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.approveReject(!1))}),t._uU(85," Reject "),t.qZA()()()()()()()}if(2&s){const o=t.oxw();t.xp6(7),t.Oqu(o.studDetails.name),t.xp6(7),t.Tol("M"===o.studDetails.gender?"badge bg-success mr-1":"badge bg-primary mr-1"),t.xp6(1),t.hij(" ","M"===o.studDetails.gender?"Male":"Female"," "),t.xp6(4),t.hij(" ",o.studDetails.phone,""),t.xp6(4),t.hij(" ",t.lcZ(24,21,o.studDetails.dob)," "),t.xp6(5),t.hij(" ",o.studDetails.formYear,""),t.xp6(4),t.hij(" ",o.studDetails.course,""),t.xp6(4),t.hij(" ",o.studDetails.constituency," "),t.xp6(4),t.hij(" ",o.studDetails.ward,""),t.xp6(4),t.hij(" ",o.studDetails.village,""),t.xp6(5),t.hij(" ",o.studDetails.countyStage," "),t.xp6(9),t.hij(" ",o.studDetails.instName," "),t.xp6(4),t.hij(" ",o.studDetails.instBank,""),t.xp6(4),t.hij(" ",o.studDetails.instAccNo," "),t.xp6(4),t.hij(" ",o.studDetails.instBranch," "),t.xp6(2),t.Q6J("ngIf",t.lcZ(73,23,o.wardStatData$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(75,25,o.countyStatData$)),t.xp6(8),t.Q6J("disabled","PENDING"!==o.studDetails.countyStage),t.xp6(2),t.Q6J("disabled","PENDING"!==o.studDetails.countyStage)}}let Re=(()=>{var s;class a{constructor(e,n,r,i,c,d){this.httpService=e,this.globalService=n,this.toastr=r,this.router=i,this.route=c,this.modalService=d,this.loading=!0,this.rows=[],this.filteredRows=[],this.defaultNavActiveId=1,this.studentData$=(0,u.of)([]),this.wardStatData$=(0,u.of)({}),this.countyStatData$=(0,u.of)({}),this.title="Assessor",this.actions=["View","Edit"],this.totalRecords=0,this.subs=[],this.studRef="",this.route.paramMap.subscribe(m=>{this.studRef=m.get("id").toString(),console.log(this.studRef)})}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}ngOnInit(){this.getIndividualData(),this.getIndividualStatus(),this.getIndividualCountyStatus()}getIndividualData(e=0,n=50){this.loading=!0,this.studentData$=this.httpService.getReq(`bursary/student/${this.studRef}`).pipe((0,T.U)(i=>(console.log(i),console.log(i),this.studDetails=i.data,console.log(this.studDetails),this.studDetails)),(0,f.K)(i=>(this.loading=!1,i instanceof g?this.toastr.error(i.message,"API Timeout"):this.toastr.error(i.statusText||i.message,"Data Not Fetched"),(0,u.of)([]))))}getIndividualStatus(){this.loading=!0,this.wardStatData$=this.httpService.getReq(`bursary/student/ward-status/${this.studRef}`).pipe((0,T.U)(e=>(this.studWardStatus=e.data,this.studWardStatus)),(0,f.K)(e=>(this.loading=!1,e instanceof g?this.toastr.error(e.message,"API Timeout"):this.toastr.error(e.statusText||e.message,"Data Not Fetched"),(0,u.of)([]))))}getIndividualCountyStatus(){this.loading=!0,this.countyStatData$=this.httpService.getReq(`bursary/student/county-status/${this.studRef}`).pipe((0,T.U)(e=>(this.studCountyStatus=e.data,this.studCountyStatus)),(0,f.K)(e=>(this.loading=!1,e instanceof g?this.toastr.error(e.message,"API Timeout"):this.toastr.error(e.statusText||e.message,"Data Not Fetched"),(0,u.of)([]))))}triggerEvent(e){JSON.parse(e)}updateFilteredRowsEvent(e){this.filteredRows=e}approveReject(e){console.log(this.studWardStatus),this.bsModalRef=this.modalService.show(Se,{initialState:{title:e?`Approve Student : ${this.studRef}`:`Reject Student : ${this.studRef}`,apprStat:e,apprData:this.studWardStatus.awardedAmount,studRef:this.studRef},class:"modal-md"}),this.bsModalRef.content.closeBtnName="Close",this.bsModalRef.onHide?.subscribe(r=>{console.log(r),this.ngOnInit()})}viewStudent(){this.router.navigate([`bursary/student/${this.studDetails._id}`])}}return(s=a).\u0275fac=function(e){return new(e||s)(t.Y36(b.G),t.Y36(S.s),t.Y36(A._W),t.Y36(v.F0),t.Y36(v.gz),t.Y36(Z))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-view-stud-county-level"]],decls:13,vars:3,consts:[[1,"pagetitle"],[1,"d-flex","flex-row","justify-content-between","align-items-center"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/bursary/all-students"],[1,"breadcrumb-item","active"],["class","section",4,"ngIf"],[1,"section"],[1,"row"],[1,"col-lg-4"],[1,"card"],[1,"card-body"],[1,"d-flex","justify-content-between"],[1,"card-title"],["type","button",1,"btn","btn-info","btn-sm","mx-3","w-25",3,"click"],[1,"badge","bg-primary","mr-1"],["class","card",4,"ngIf"],["type","button",1,"btn","btn-success","btn-sm","mx-3",3,"disabled","click"],["type","button",1,"btn","btn-danger","btn-sm","mx-3",3,"disabled","click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Student Approval Status Page"),t.qZA(),t.TgZ(3,"div",1)(4,"nav")(5,"ol",2)(6,"li",3)(7,"a",4),t._uU(8,"All Approved Students"),t.qZA()(),t.TgZ(9,"li",5),t._uU(10,"Student"),t.qZA()()()()(),t.YNc(11,ke,86,27,"section",6),t.ALo(12,"async")),2&e&&(t.xp6(11),t.Q6J("ngIf",t.lcZ(12,1,n.studentData$)))},dependencies:[p.O5,v.rH,p.Ov,p.uU]}),a})();function De(s,a){1&s&&t.GkF(0)}let Ee=(()=>{var s;class a{constructor(e,n,r,i,c){this.httpService=e,this.globalService=n,this.toastr=r,this.router=i,this.modalService=c,this.loading=!0,this.rows=[],this.filteredRows=[],this.defaultNavActiveId=1,this.columns=[{name:"Full Name",prop:"name"},{name:"Gender",prop:"gender"},{name:"DOB",prop:"dob"},{name:"Form/Year",prop:"formYear"},{name:"Mobile No",prop:"phone"},{name:"Course",prop:"course"},{name:"Ward",prop:"ward"},{name:"Village",prop:"village"},{name:"Ward Stage",prop:"wardStage"},{name:"County Stage",prop:"countyStage"}],this.allColumns=[...this.columns],this.studentsList$=(0,u.of)([]),this.title="Assessor",this.actions=[],this.totalRecords=0,this.subs=[]}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}ngOnInit(){this.getIndividualData()}getIndividualData(e=0,n=50){this.loading=!0,this.studentsList$=this.httpService.getReq("bursary/students").pipe((0,T.U)(i=>(console.log(i),console.log(i),200===i.statusCode?(this.rows=i.data.map((d,m)=>(d.dob=this.globalService.formatDate(d.dob),{...d,frontendId:m+1})),this.rows=this.rows.filter(d=>void 0!==d),console.log(this.rows),this.totalRecords=this.rows.length,this.loading=!1,this.rows):(this.loading=!1,(0,u.of)([])))),(0,f.K)(i=>(this.loading=!1,i instanceof g?this.toastr.error(i.message,"API Timeout"):this.toastr.error(i.statusText||i.message,"Data Not Fetched"),(0,u.of)([]))))}updateColumns(e){this.columns=[...e]}triggerEvent(e){let n=JSON.parse(e);"View"==n.action&&(console.log(n.row),this.toastr.info("Cannot view student from Ward Management"))}updateFilteredRowsEvent(e){this.filteredRows=e}addStudent(){this.bsModalRef=this.modalService.show(U,{initialState:{title:"Add Bursary"},class:"modal-lg"}),this.bsModalRef.content.closeBtnName="Close",this.bsModalRef.content.isEdit=!1,this.bsModalRef.onHidden?.emit(n=>{console.log(n),this.getIndividualData()})}addAssessor(){}}return(s=a).\u0275fac=function(e){return new(e||s)(t.Y36(b.G),t.Y36(S.s),t.Y36(A._W),t.Y36(v.F0),t.Y36(Z))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-list-all-stud-cm"]],decls:19,vars:8,consts:[[1,"pagetitle"],[1,"d-flex","justify-content-between","align-items-center"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","/admin/dashboard"],[1,"breadcrumb-item","active"],[1,"section"],[1,"d-flex","justify-content-end"],[1,"row"],[1,"col-md-12"],[1,"card","p-1"],[4,"ngIf"],[3,"columns","rows","actions","loadingIndicator","totalItems","outputEvent","updateFilteredRows"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"All Students Page"),t.qZA(),t.TgZ(3,"div",1)(4,"nav")(5,"ol",2)(6,"li",3)(7,"a",4),t._uU(8,"Dashboard"),t.qZA()(),t.TgZ(9,"li",5),t._uU(10,"Students"),t.qZA()()()()(),t.TgZ(11,"section",6),t._UZ(12,"div",7),t.TgZ(13,"div",8)(14,"div",9)(15,"div",10),t.YNc(16,De,1,0,"ng-container",11),t.ALo(17,"async"),t.TgZ(18,"app-custom-tbl",12),t.NdJ("outputEvent",function(i){return n.triggerEvent(i)})("updateFilteredRows",function(i){return n.updateFilteredRowsEvent(i)}),t.qZA()()()()()),2&e&&(t.xp6(16),t.Q6J("ngIf",t.lcZ(17,6,n.studentsList$)),t.xp6(2),t.Q6J("columns",n.columns)("rows",n.rows)("actions",n.actions)("loadingIndicator",!1)("totalItems",n.totalRecords))},dependencies:[p.O5,k,p.Ov]}),a})();function $(s,a,o,e,n,r,i){try{var c=s[r](i),d=c.value}catch(m){return void o(m)}c.done?a(d):Promise.resolve(d).then(e,n)}function G(s){return function(){var a=this,o=arguments;return new Promise(function(e,n){var r=s.apply(a,o);function i(d){$(r,e,n,i,c,"next",d)}function c(d){$(r,e,n,i,c,"throw",d)}i(void 0)})}}function Ie(s,a){1&s&&t._uU(0),2&s&&t.hij(" ",a.value," ")}function Ne(s,a){if(1&s){const o=t.EpF();t.TgZ(0,"span",26),t.NdJ("dblclick",function(){t.CHM(o);const n=t.oxw().rowIndex,r=t.oxw();return t.KtG(r.editing[n+"-amt"]=!0)}),t._uU(1),t.qZA()}if(2&s){const o=t.oxw().value;t.xp6(1),t.hij(" ",o," ")}}function Ue(s,a){if(1&s){const o=t.EpF();t.TgZ(0,"input",27),t.NdJ("blur",function(n){t.CHM(o);const r=t.oxw().rowIndex,i=t.oxw();return t.KtG(i.updateValue(n,"amt",r))}),t.qZA()}if(2&s){const o=t.oxw().value;t.Q6J("value",o)}}function qe(s,a){if(1&s&&(t.YNc(0,Ne,2,1,"span",24),t.YNc(1,Ue,1,1,"input",25)),2&s){const o=a.rowIndex,e=t.oxw();t.Q6J("ngIf",!e.editing[o+"-amt"]),t.xp6(1),t.Q6J("ngIf",e.editing[o+"-amt"])}}function Fe(s,a){if(1&s){const o=t.EpF();t.TgZ(0,"span",28)(1,"div",29)(2,"button",30),t.NdJ("click",function(){const r=t.CHM(o).row,i=t.oxw();return t.KtG(i.removeStud(r))}),t._UZ(3,"i",31),t.qZA()()()}}function Me(s,a){if(1&s){const o=t.EpF();t.TgZ(0,"div",32)(1,"span",33),t._uU(2),t.qZA(),t.TgZ(3,"span",33),t._uU(4),t.qZA(),t.TgZ(5,"button",34),t.NdJ("click",function(){const r=t.CHM(o).$implicit,i=t.oxw();return t.KtG(i.removeDoc(r))}),t._UZ(6,"i",31),t.qZA()()}if(2&s){const o=a.$implicit;t.xp6(2),t.hij(" ",o.name,""),t.xp6(2),t.hij(" ",o.desc,"")}}let Le=(()=>{var s;class a{constructor(e,n,r,i){this.bsModalRef=e,this.httpService=n,this.toastr=r,this.detectorRef=i,this.studList=[],this.countyAppr=!1,this.list=[],this.approvalDoc=null,this.countyStatData$=(0,u.of)({}),this.studRef="",this.editing={},this.rows=[],this.documents=[],this.ColumnMode=y.hq}ngOnInit(){for(const[e,n]of this.studList.entries())this.getIndividualCountyStatus(n._id,e);this.detectorRef.detectChanges()}onFileSelected(e){const n=e.target;if(typeof FileReader<"u"){const r=new FileReader;r.onload=i=>{},r.readAsArrayBuffer(n.files[0])}this.approvalDoc=n.files[0]}addDoc(){let e=document.getElementById("filename");console.log(e.target),this.approvalDoc.desc=e.value,this.documents.push(this.approvalDoc);let n=document.getElementById("docForm");console.log(this.documents,this.approvalDoc),n.reset(),this.approvalDoc=null}removeDoc(e){this.documents.splice(e,1)}removeStud(e){let n=this.studList.indexOf(e);this.studList.splice(n,1),this.studList=[...this.studList],this.detectorRef.detectChanges()}getIndividualCountyStatus(e,n){var r=this;return G(function*(){yield r.httpService.getReq(`bursary/student/county-status/${e}`).subscribe(i=>(r.studList[n].countyAmt=i.data.awardedAmount,r.studList[n].initAmt=i.data.awardedAmount,r.getIndividualMinStatus(e,n),r.studList)),(0,f.K)(i=>(i instanceof g?r.toastr.error(i.message,"API Timeout"):r.toastr.error(i.statusText||i.message,"Data Not Fetched"),(0,u.of)([])))})()}getIndividualMinStatus(e,n){var r=this;return G(function*(){yield r.httpService.getReq(`bursary/student/ministry-status/${e}`).subscribe(i=>{let c=r.studList[n].countyAmt-i.data.awardedAmount;return r.studList[n].countyAmt=c>0?c:i.data.awardedAmount,r.studList}),(0,f.K)(i=>(i instanceof g?r.toastr.error(i.message,"API Timeout"):r.toastr.error(i.statusText||i.message,"Data Not Fetched"),(0,u.of)([])))})()}updateValue(e,n,r){console.log("inline editing rowIndex",r),this.editing[r+"-"+n]=!1,this.studList[r].countyAmt=e.target.value,this.studList=[...this.studList],console.log("UPDATED!",this.studList)}submit(){let e=new FormData;e.append("payload",JSON.stringify(this.studList));for(const r of this.documents)console.log(r.rawFile),console.log(r),e.append("files",new Blob([r]),r.name);this.httpService.postReq("bursary/bulk-ministry-approval",e).subscribe({next:r=>{console.log(r),this.toastr.success(r.message),this.bsModalRef.hide()},error:r=>{this.toastr.error(r)}}),console.log(this.studList),console.log(this.documents)}}return(s=a).\u0275fac=function(e){return new(e||s)(t.Y36(C),t.Y36(b.G),t.Y36(A._W),t.Y36(t.sBO))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-fin-appr"]],decls:31,vars:15,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"d-flex","flex-column","justify-content-between","align-items-center"],[1,"bootstrap","w-100","m-auto","border","p-2",3,"headerHeight","limit","columnMode","footerHeight","rowHeight","rows"],["mydatatable",""],["name","Name","prop","name"],["ngx-datatable-cell-template",""],["name","Amount","prop","countyAmt"],["name","Actions","prop","name",3,"sortable","draggable","resizeable","maxWidth"],["class","parent-item","ngx-datatable-cell-template",""],["id","docForm",1,"m-2"],[1,"form-group"],["for","file"],[1,"d-flex","flex-row","justify-content-between","m-2"],["type","file","id","file","placeholder","Select documents/receipts/cheques","accept","application/pdf",1,"form-control","w-75","h-75","m-1",3,"change"],["type","text","id","filename","placeholder","Description",1,"form-control","w-75","h-75","m-1"],["type","button",1,"btn","btn-success","m-1",3,"disabled","click"],["class","d-flex flex-row justify-content-between w-75 m-auto",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"disabled","click"],["type","button",1,"btn","btn-default",3,"click"],["title","Double click to edit",3,"dblclick",4,"ngIf"],["autofocus","","type","text",3,"value","blur",4,"ngIf"],["title","Double click to edit",3,"dblclick"],["autofocus","","type","text",3,"value","blur"],[1,"parent-item"],[1,"example"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"bi","bi-x"],[1,"d-flex","flex-row","justify-content-between","w-75","m-auto"],[1,"m-1"],["type","button",1,"btn","btn-danger","btn-s","m-1",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h5",1),t._uU(2),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.bsModalRef.hide()}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4)(7,"div",5)(8,"ngx-datatable",6,7)(10,"ngx-datatable-column",8),t.YNc(11,Ie,1,1,"ng-template",9),t.qZA(),t.TgZ(12,"ngx-datatable-column",10),t.YNc(13,qe,2,2,"ng-template",9),t.qZA(),t.TgZ(14,"ngx-datatable-column",11),t.YNc(15,Fe,4,0,"ng-template",12),t.qZA()()()(),t.TgZ(16,"form",13)(17,"div",14)(18,"label",15),t._uU(19,"Supporting financial documents"),t.qZA(),t.TgZ(20,"div",16)(21,"input",17),t.NdJ("change",function(i){return n.onFileSelected(i)}),t.qZA(),t._UZ(22,"input",18),t.TgZ(23,"button",19),t.NdJ("click",function(){return n.addDoc()}),t._uU(24," Add "),t.qZA()()()(),t.YNc(25,Me,7,2,"div",20),t.TgZ(26,"div",21)(27,"button",22),t.NdJ("click",function(){return n.submit()}),t._uU(28," Submit "),t.qZA(),t.TgZ(29,"button",23),t.NdJ("click",function(){return n.bsModalRef.hide()}),t._uU(30),t.qZA()()),2&e&&(t.xp6(2),t.Oqu(n.title),t.xp6(6),t.Q6J("headerHeight",50)("limit",5)("columnMode",n.ColumnMode.force)("footerHeight",50)("rowHeight",40)("rows",n.studList),t.xp6(6),t.Q6J("sortable",!1)("draggable",!1)("resizeable",!1)("maxWidth",70),t.xp6(9),t.Q6J("disabled",null==n.approvalDoc),t.xp6(2),t.Q6J("ngForOf",n.documents),t.xp6(2),t.Q6J("disabled",0==n.studList.length||0==n.documents.length),t.xp6(3),t.hij(" ",n.closeBtnName," "))},dependencies:[p.sg,p.O5,y.nE,y.UC,y.vq,l._Y,l.JL],changeDetection:0}),a})();function Oe(s,a){1&s&&t.GkF(0)}let Je=(()=>{var s;class a{constructor(e,n,r,i,c){this.httpService=e,this.globalService=n,this.toastr=r,this.router=i,this.modalService=c,this.loading=!0,this.rows=[],this.filteredRows=[],this.defaultNavActiveId=1,this.columns=[{name:"Full Name",prop:"name"},{name:"Gender",prop:"gender"},{name:"DOB",prop:"dob"},{name:"School",prop:"instName"},{name:"Form/Year",prop:"formYear"},{name:"Mobile No",prop:"phone"},{name:"Course",prop:"course"},{name:"Ward",prop:"ward"},{name:"Ministry Stage",prop:"ministryStage"},{name:"Actions",prop:"_id"}],this.allColumns=[...this.columns],this.studentsList$=(0,u.of)([]),this.studentsToApprove=[],this.title="Assessor",this.actions=["View"],this.totalRecords=0,this.subs=[]}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}ngOnInit(){this.getIndividualData()}getIndividualData(e=0,n=50){this.loading=!0,this.studentsList$=this.httpService.getReq("bursary/students").pipe((0,T.U)(i=>(console.log(i),console.log(i),200===i.statusCode?(this.rows=i.data.map((d,m)=>{if("APPROVED"===d.countyStage)return d.dob=this.globalService.formatDate(d.dob),{...d,frontendId:m+1}}),this.rows=this.rows.filter(d=>void 0!==d),console.log(this.rows),this.totalRecords=this.rows.length,this.loading=!1,this.rows):(this.loading=!1,(0,u.of)([])))),(0,f.K)(i=>(this.loading=!1,i instanceof g?this.toastr.error(i.message,"API Timeout"):this.toastr.error(i.statusText||i.message,"Data Not Fetched"),(0,u.of)([]))))}updateColumns(e){this.columns=[...e]}triggerEvent(e){let n=JSON.parse(e);"View"==n.action&&(console.log(n.row),this.router.navigate([`bursary/student/county-status/${n.row._id}`]))}updateFilteredRowsEvent(e){this.filteredRows=e}selectedRowsEvent(e){this.studentsToApprove=e,this.studentsToApprove=[...this.studentsToApprove].filter(n=>"PENDING"===n.ministryStage)}fincApproval(){this.studentsToApprove.length>0?(this.bsModalRef=this.modalService.show(Le,{initialState:{title:"Confirm/Edit Awarded Amounts",countyAppr:!0,studList:this.studentsToApprove},class:"modal-lg"}),this.bsModalRef.content.closeBtnName="Close",this.bsModalRef.onHide?.subscribe(n=>{console.log(n),this.getIndividualData()})):this.toastr.info("Select multiple students that will proceed to the next step")}}return(s=a).\u0275fac=function(e){return new(e||s)(t.Y36(b.G),t.Y36(S.s),t.Y36(A._W),t.Y36(v.F0),t.Y36(Z))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-list-appr-county-stud"]],decls:22,vars:8,consts:[[1,"pagetitle"],[1,"d-flex","justify-content-between","align-items-center"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","/admin/dashboard"],[1,"breadcrumb-item","active"],[1,"btn","bg-primary",3,"click"],[1,"text-white","m-0"],[1,"section"],[1,"d-flex","justify-content-end"],[1,"row"],[1,"col-md-12"],[1,"card","p-1"],[4,"ngIf"],[3,"columns","rows","actions","loadingIndicator","totalItems","outputEvent","selectedRowsEvent","updateFilteredRows"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Finance Level - Students Page"),t.qZA(),t.TgZ(3,"div",1)(4,"nav")(5,"ol",2)(6,"li",3)(7,"a",4),t._uU(8,"Dashboard"),t.qZA()(),t.TgZ(9,"li",5),t._uU(10,"Students Approved from County"),t.qZA()()(),t.TgZ(11,"button",6),t.NdJ("click",function(){return n.fincApproval()}),t.TgZ(12,"p",7),t._uU(13,"Approve Selected Students"),t.qZA()()()(),t.TgZ(14,"section",8),t._UZ(15,"div",9),t.TgZ(16,"div",10)(17,"div",11)(18,"div",12),t.YNc(19,Oe,1,0,"ng-container",13),t.ALo(20,"async"),t.TgZ(21,"app-custom-tbl",14),t.NdJ("outputEvent",function(i){return n.triggerEvent(i)})("selectedRowsEvent",function(i){return n.selectedRowsEvent(i)})("updateFilteredRows",function(i){return n.updateFilteredRowsEvent(i)}),t.qZA()()()()()),2&e&&(t.xp6(19),t.Q6J("ngIf",t.lcZ(20,6,n.studentsList$)),t.xp6(2),t.Q6J("columns",n.columns)("rows",n.rows)("actions",n.actions)("loadingIndicator",!1)("totalItems",n.totalRecords))},dependencies:[p.O5,k,p.Ov]}),a})(),Be=(()=>{var s;class a{constructor(e,n,r){this.bsModalRef=e,this.httpService=n,this.toastr=r,this.migoriConstData=[{constituency:"Rongo",wards:["North Kamagambo","Central Kamagambo","East Kamagambo","South Kamagambo"]},{constituency:"Awendo",wards:["North East Sakwa","South Sakwa","West Sakwa","Central Sakwa"]},{constituency:"Suna East",wards:["God Jope","Suna Central","Kakrao","Kwa"]},{constituency:"Suna West",wards:["Wiga","Wasweta II","Ragan-Oruba","Wasimbete"]},{constituency:"Uriri",wards:["West Kanyamkago","North Kanyamkago","Central Kanyamkago","South Kanyamkago","East Kanyamkago"]},{constituency:"Kuria East",wards:["Gokeharaka/Getamwega","Ntimaru West","Ntimaru East","Nyabasi East","Nyabasi West"]},{constituency:"Nyatike",wards:["Kachieng\u2019","Kanyasa","North Kadem","Macalder/Kanyarwanda","Kaler","Got Kachola","Muhuru"]},{constituency:"Kuria West",wards:["Bukira East","Bukira Central/Ikerege","Isibania","Makerero","Masaba","Tagare","Nyamosense/Komosoko"]}],this.isEdit=!1,this.list=[]}ngOnInit(){this.bursaryForm=new l.cw({email:new l.NI("",[l.kI.required,l.kI.email]),name:new l.NI("",[l.kI.required]),mobile:new l.NI("",[l.kI.required]),idNo:new l.NI("",[l.kI.required])})}filterWards(){let e=this.bursaryForm.controls.constituency.value;this.selectedWards=[...this.migoriConstData].filter(n=>n.constituency==e)[0].wards,console.log(this.selectedWards)}submit(){this.isEdit?console.log(this.bursaryForm.value):(console.log("this.bursaryForm.value"),this.httpService.postAuthReq("auth/users/county",{email:this.bursaryForm.controls.email.value,name:this.bursaryForm.controls.name.value,idNo:this.bursaryForm.controls.idNo.value,mobile:this.bursaryForm.controls.mobile.value,password:"qwerty"}).subscribe({next:r=>{console.log(r),r?this.toastr.success(r.message,"County user created successfully"):this.toastr.error(r.message,"User not created"),this.bsModalRef.hide()},error:r=>{this.toastr.error(r,"User not created")}}))}}return(s=a).\u0275fac=function(e){return new(e||s)(t.Y36(C),t.Y36(b.G),t.Y36(A._W))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-add-county-users"]],decls:32,vars:3,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"m-2",3,"formGroup"],[1,"form-group"],["for","bursaryName"],["type","email","id","email","placeholder","Enter email","formControlName","email",1,"form-control"],["for","idNo"],["type","idNo","id","idNo","placeholder","Enter ID Number","formControlName","idNo",1,"form-control"],[1,"row","my-1"],[1,"col-md-6"],["for","name"],["type","text","id","name","placeholder","Enter name","formControlName","name",1,"form-control"],["for","mobile"],["type","text","id","mobile","placeholder","Enter mobile","formControlName","mobile",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-default",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.bsModalRef.hide()}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4)(7,"form",5)(8,"div",6)(9,"label",7),t._uU(10,"Email"),t.qZA(),t._UZ(11,"input",8),t.qZA(),t.TgZ(12,"div",6)(13,"label",9),t._uU(14,"ID Number"),t.qZA(),t._UZ(15,"input",10),t.qZA(),t.TgZ(16,"div",11)(17,"div",12)(18,"div",6)(19,"label",13),t._uU(20,"name"),t.qZA(),t._UZ(21,"input",14),t.qZA()(),t.TgZ(22,"div",12)(23,"div",6)(24,"label",15),t._uU(25,"Mobile No"),t.qZA(),t._UZ(26,"input",16),t.qZA()()()()(),t.TgZ(27,"div",17)(28,"button",18),t.NdJ("click",function(){return n.submit()}),t._uU(29," Submit "),t.qZA(),t.TgZ(30,"button",19),t.NdJ("click",function(){return n.bsModalRef.hide()}),t._uU(31),t.qZA()()),2&e&&(t.xp6(2),t.Oqu(n.title),t.xp6(5),t.Q6J("formGroup",n.bursaryForm),t.xp6(24),t.hij(" ",n.closeBtnName," "))},dependencies:[l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u]}),a})();function Ye(s,a){1&s&&t.GkF(0)}let je=(()=>{var s;class a{constructor(e,n,r,i,c){this.httpService=e,this.globalService=n,this.toastr=r,this.router=i,this.modalService=c,this.loading=!0,this.rows=[],this.filteredRows=[],this.defaultNavActiveId=1,this.columns=[{name:"Name",prop:"name"},{name:"Email",prop:"email"},{name:"ID No",prop:"idNo"},{name:"Mobile No",prop:"mobile"}],this.allColumns=[...this.columns],this.usersList$=(0,u.of)([]),this.title="Assessor",this.actions=["View"],this.totalRecords=0,this.subs=[]}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}ngOnInit(){this.getIndividualData()}getIndividualData(e=0,n=50){this.loading=!0,this.usersList$=this.httpService.getAuthReq("auth/users/all").pipe((0,T.U)(i=>(console.log(i),console.log(i),200===i.statusCode?(this.rows=i.data.map((d,m)=>{if("COUNTY"===d.profile)return{...d,frontendId:m+1}}),this.rows=this.rows.filter(d=>void 0!==d),console.log(this.rows),this.totalRecords=this.rows.length,this.loading=!1,this.rows):(this.loading=!1,(0,u.of)([])))),(0,f.K)(i=>(this.loading=!1,i instanceof g?this.toastr.error(i.message,"API Timeout"):this.toastr.error(i.statusText||i.message,"Data Not Fetched"),(0,u.of)([]))))}updateColumns(e){this.columns=[...e]}triggerEvent(e){let n=JSON.parse(e);"View"==n.action&&(console.log(n.row),this.router.navigate([`bursary/student/${n.row._id}`]))}updateFilteredRowsEvent(e){this.filteredRows=e}addUser(){this.bsModalRef=this.modalService.show(Be,{initialState:{title:"Add County User",isEdit:!1}}),this.bsModalRef.content.closeBtnName="Close",this.bsModalRef.onHide?.subscribe(n=>{console.log(n),this.getIndividualData()})}}return(s=a).\u0275fac=function(e){return new(e||s)(t.Y36(b.G),t.Y36(S.s),t.Y36(A._W),t.Y36(v.F0),t.Y36(Z))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-list-county-users"]],decls:22,vars:8,consts:[[1,"pagetitle"],[1,"d-flex","justify-content-between","align-items-center"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","/admin/dashboard"],[1,"breadcrumb-item","active"],[1,"btn","bg-primary",3,"click"],[1,"text-white"],[1,"section"],[1,"d-flex","justify-content-end"],[1,"row"],[1,"col-md-12"],[1,"card","p-1"],[4,"ngIf"],[3,"columns","rows","actions","loadingIndicator","totalItems","outputEvent","updateFilteredRows"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Users Page"),t.qZA(),t.TgZ(3,"div",1)(4,"nav")(5,"ol",2)(6,"li",3)(7,"a",4),t._uU(8,"Dashboard"),t.qZA()(),t.TgZ(9,"li",5),t._uU(10,"County Users"),t.qZA()()(),t.TgZ(11,"button",6),t.NdJ("click",function(){return n.addUser()}),t.TgZ(12,"p",7),t._uU(13,"Add County User"),t.qZA()()()(),t.TgZ(14,"section",8),t._UZ(15,"div",9),t.TgZ(16,"div",10)(17,"div",11)(18,"div",12),t.YNc(19,Ye,1,0,"ng-container",13),t.ALo(20,"async"),t.TgZ(21,"app-custom-tbl",14),t.NdJ("outputEvent",function(i){return n.triggerEvent(i)})("updateFilteredRows",function(i){return n.updateFilteredRowsEvent(i)}),t.qZA()()()()()),2&e&&(t.xp6(19),t.Q6J("ngIf",t.lcZ(20,6,n.usersList$)),t.xp6(2),t.Q6J("columns",n.columns)("rows",n.rows)("actions",n.actions)("loadingIndicator",!1)("totalItems",n.totalRecords))},dependencies:[p.O5,k,p.Ov]}),a})();function We(s,a){if(1&s&&(t.TgZ(0,"div",10)(1,"div",11)(2,"h5",13),t._uU(3,"Ward Stage Approval Details"),t.qZA(),t._UZ(4,"hr"),t.TgZ(5,"p")(6,"strong"),t._uU(7,"Approval Ref :"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"p")(10,"strong"),t._uU(11,"Amount :"),t.qZA(),t._uU(12),t.qZA()()()),2&s){const o=t.oxw(2);t.xp6(8),t.hij(" ",o.studWardStatus._id," "),t.xp6(4),t.hij(" KES ",o.studWardStatus.awardedAmount," ")}}function Pe(s,a){if(1&s&&(t.TgZ(0,"div",10)(1,"div",11)(2,"h5",13),t._uU(3,"County Stage Approval Details"),t.qZA(),t._UZ(4,"hr"),t.TgZ(5,"p")(6,"strong"),t._uU(7,"Approval Ref :"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"p")(10,"strong"),t._uU(11,"Amount :"),t.qZA(),t._uU(12),t.qZA()()()),2&s){const o=t.oxw(2);t.xp6(8),t.hij(" ",o.studCountyStatus._id," "),t.xp6(4),t.hij(" KES ",o.studCountyStatus.awardedAmount," ")}}function $e(s,a){if(1&s){const o=t.EpF();t.TgZ(0,"div")(1,"p")(2,"strong"),t._uU(3),t.qZA(),t.TgZ(4,"button",18),t.NdJ("click",function(){const r=t.CHM(o).$implicit,i=t.oxw(3);return t.KtG(i.viewDoc(r))}),t._UZ(5,"i",19),t.qZA()()()}if(2&s){const o=a.$implicit;t.xp6(3),t.hij("",o," :")}}function Ge(s,a){if(1&s&&(t.TgZ(0,"div",10)(1,"div",11)(2,"h5",13),t._uU(3,"Ministry/Finance Stage Approval Details"),t.qZA(),t._UZ(4,"hr"),t.TgZ(5,"p")(6,"strong"),t._uU(7,"Approval Ref :"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"p")(10,"strong"),t._uU(11,"Amount :"),t.qZA(),t._uU(12),t.qZA(),t._UZ(13,"hr"),t.YNc(14,$e,6,1,"div",17),t.qZA()()),2&s){const o=t.oxw(2);t.xp6(8),t.hij(" ",o.studMinStatus._id," "),t.xp6(4),t.hij(" KES ",o.studMinStatus.awardedAmount," "),t.xp6(2),t.Q6J("ngForOf",o.studMinStatus.docs)}}function Ke(s,a){if(1&s){const o=t.EpF();t.TgZ(0,"section",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"div",12)(6,"h5",13),t._uU(7),t.qZA(),t.TgZ(8,"button",14),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.viewStudent())}),t._uU(9," View More Details "),t.qZA()(),t._UZ(10,"hr"),t.TgZ(11,"p")(12,"strong"),t._uU(13,"Gender : "),t.qZA(),t.TgZ(14,"span"),t._uU(15),t.qZA()(),t.TgZ(16,"p")(17,"strong"),t._uU(18,"Phone : "),t.qZA(),t._uU(19),t.qZA(),t.TgZ(20,"p")(21,"strong"),t._uU(22,"Date of Birth : "),t.qZA(),t._uU(23),t.ALo(24,"date"),t.qZA(),t.TgZ(25,"p")(26,"strong"),t._uU(27,"Year of Study : "),t.qZA(),t._uU(28),t.qZA(),t.TgZ(29,"p")(30,"strong"),t._uU(31,"Course : "),t.qZA(),t._uU(32),t.qZA(),t.TgZ(33,"p")(34,"strong"),t._uU(35,"Constituency : "),t.qZA(),t._uU(36),t.qZA(),t.TgZ(37,"p")(38,"strong"),t._uU(39,"Ward : "),t.qZA(),t._uU(40),t.qZA(),t.TgZ(41,"p")(42,"strong"),t._uU(43,"Village : "),t.qZA(),t._uU(44),t.qZA(),t.TgZ(45,"p")(46,"strong"),t._uU(47,"County Stage : "),t.qZA(),t.TgZ(48,"span",15),t._uU(49),t.qZA()()()()(),t.TgZ(50,"div",9)(51,"div",10)(52,"div",11)(53,"h5",13),t._uU(54,"School"),t.qZA(),t.TgZ(55,"p")(56,"strong"),t._uU(57,"School/Institution :"),t.qZA(),t._uU(58),t.qZA(),t.TgZ(59,"p")(60,"strong"),t._uU(61,"Bank Name :"),t.qZA(),t._uU(62),t.qZA(),t.TgZ(63,"p")(64,"strong"),t._uU(65,"Bank Account No :"),t.qZA(),t._uU(66),t.qZA(),t.TgZ(67,"p")(68,"strong"),t._uU(69,"Bank Branch :"),t.qZA(),t._uU(70),t.qZA()()(),t.YNc(71,We,13,2,"div",16),t.ALo(72,"async"),t.qZA(),t.TgZ(73,"div",9),t.YNc(74,Pe,13,2,"div",16),t.ALo(75,"async"),t.YNc(76,Ge,15,3,"div",16),t.ALo(77,"async"),t.qZA()()()}if(2&s){const o=t.oxw();t.xp6(7),t.Oqu(o.studDetails.name),t.xp6(7),t.Tol("M"===o.studDetails.gender?"badge bg-success mr-1":"badge bg-primary mr-1"),t.xp6(1),t.hij(" ","M"===o.studDetails.gender?"Male":"Female"," "),t.xp6(4),t.hij(" ",o.studDetails.phone,""),t.xp6(4),t.hij(" ",t.lcZ(24,20,o.studDetails.dob)," "),t.xp6(5),t.hij(" ",o.studDetails.formYear,""),t.xp6(4),t.hij(" ",o.studDetails.course,""),t.xp6(4),t.hij(" ",o.studDetails.constituency," "),t.xp6(4),t.hij(" ",o.studDetails.ward,""),t.xp6(4),t.hij(" ",o.studDetails.village,""),t.xp6(5),t.hij(" ",o.studDetails.countyStage," "),t.xp6(9),t.hij(" ",o.studDetails.instName," "),t.xp6(4),t.hij(" ",o.studDetails.instBank,""),t.xp6(4),t.hij(" ",o.studDetails.instAccNo," "),t.xp6(4),t.hij(" ",o.studDetails.instBranch," "),t.xp6(1),t.Q6J("ngIf",t.lcZ(72,22,o.wardStatData$)),t.xp6(3),t.Q6J("ngIf",t.lcZ(75,24,o.countyStatData$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(77,26,o.minStatData$))}}let He=(()=>{var s;class a{constructor(e,n,r,i,c,d){this.httpService=e,this.globalService=n,this.toastr=r,this.router=i,this.route=c,this.modalService=d,this.loading=!0,this.rows=[],this.filteredRows=[],this.defaultNavActiveId=1,this.studentData$=(0,u.of)([]),this.wardStatData$=(0,u.of)({}),this.countyStatData$=(0,u.of)({}),this.minStatData$=(0,u.of)({}),this.title="Assessor",this.actions=["View","Edit"],this.totalRecords=0,this.subs=[],this.studRef="",this.route.paramMap.subscribe(m=>{this.studRef=m.get("id").toString(),console.log(this.studRef)})}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}ngOnInit(){this.getIndividualData(),this.getIndividualStatus(),this.getIndividualCountyStatus(),this.getIndividualMinStatus()}getIndividualData(e=0,n=50){this.loading=!0,this.studentData$=this.httpService.getReq(`bursary/student/${this.studRef}`).pipe((0,T.U)(i=>(console.log(i),console.log(i),this.studDetails=i.data,console.log(this.studDetails),this.studDetails)),(0,f.K)(i=>(this.loading=!1,i instanceof g?this.toastr.error(i.message,"API Timeout"):this.toastr.error(i.statusText||i.message,"Data Not Fetched"),(0,u.of)([]))))}getIndividualStatus(){this.loading=!0,this.wardStatData$=this.httpService.getReq(`bursary/student/ward-status/${this.studRef}`).pipe((0,T.U)(e=>(this.studWardStatus=e.data,this.studWardStatus)),(0,f.K)(e=>(this.loading=!1,e instanceof g?this.toastr.error(e.message,"API Timeout"):this.toastr.error(e.statusText||e.message,"Data Not Fetched"),(0,u.of)([]))))}getIndividualCountyStatus(){this.loading=!0,this.countyStatData$=this.httpService.getReq(`bursary/student/county-status/${this.studRef}`).pipe((0,T.U)(e=>(this.studCountyStatus=e.data,this.studCountyStatus)),(0,f.K)(e=>(this.loading=!1,e instanceof g?this.toastr.error(e.message,"API Timeout"):this.toastr.error(e.statusText||e.message,"Data Not Fetched"),(0,u.of)([]))))}getIndividualMinStatus(){this.loading=!0,this.minStatData$=this.httpService.getReq(`bursary/student/ministry-status/${this.studRef}`).pipe((0,T.U)(e=>(this.studMinStatus=e.data,this.studMinStatus)),(0,f.K)(e=>(this.loading=!1,e instanceof g?this.toastr.error(e.message,"API Timeout"):this.toastr.error(e.statusText||e.message,"Data Not Fetched"),(0,u.of)([]))))}triggerEvent(e){JSON.parse(e)}updateFilteredRowsEvent(e){this.filteredRows=e}viewStudent(){this.router.navigate([`bursary/student/${this.studDetails._id}`])}viewDoc(e){this.httpService.getFileReq(`bursary/student/file/${e}`).subscribe(n=>{let r=new Blob([n],{type:"application/pdf"});const i=URL.createObjectURL(r);window.open(i,"_blank")})}}return(s=a).\u0275fac=function(e){return new(e||s)(t.Y36(b.G),t.Y36(S.s),t.Y36(A._W),t.Y36(v.F0),t.Y36(v.gz),t.Y36(Z))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-view-stud-min-level"]],decls:13,vars:3,consts:[[1,"pagetitle"],[1,"d-flex","flex-row","justify-content-between","align-items-center"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/bursary/all-county-appr-students"],[1,"breadcrumb-item","active"],["class","section",4,"ngIf"],[1,"section"],[1,"row"],[1,"col-lg-4"],[1,"card"],[1,"card-body"],[1,"d-flex","justify-content-between"],[1,"card-title"],["type","button",1,"btn","btn-info","btn-sm","mx-3","w-25",3,"click"],[1,"badge","bg-primary","mr-1"],["class","card",4,"ngIf"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary","btn-sm","mx-3",3,"click"],[1,"bi","bi-eye"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Ministry Level - Student Approval Status Page"),t.qZA(),t.TgZ(3,"div",1)(4,"nav")(5,"ol",2)(6,"li",3)(7,"a",4),t._uU(8,"All Approved Students"),t.qZA()(),t.TgZ(9,"li",5),t._uU(10,"Student"),t.qZA()()()()(),t.YNc(11,Ke,78,28,"section",6),t.ALo(12,"async")),2&e&&(t.xp6(11),t.Q6J("ngIf",t.lcZ(12,1,n.studentData$)))},dependencies:[p.sg,p.O5,v.rH,p.Ov,p.uU]}),a})();function Qe(s,a){if(1&s&&(t.TgZ(0,"div")(1,"span",10),t._uU(2),t.qZA()()),2&s){const o=a.$implicit;t.xp6(2),t.hij(" ",o.studentName,"")}}let Ve=(()=>{var s;class a{constructor(e,n,r){this.bsModalRef=e,this.httpService=n,this.toastr=r,this.studList=[],this.countyAppr=!1,this.list=[],this.totalAmt=0}ngOnInit(){console.log(this.studList),this.studList?.map(e=>{this.totalAmt+=e.awardedAmount})}onFileSelected(e){const n=e.target;if(typeof FileReader<"u"){const r=new FileReader;r.onload=i=>{},r.readAsArrayBuffer(n.files[0])}this.approvalDoc=n.files[0]}submit(){this.httpService.postReq("bursary/bulk-final-approval",{students:this.studList}).subscribe({next:n=>{this.toastr.success(n.message),this.bsModalRef.hide()},error:n=>{this.toastr.error(n)}})}}return(s=a).\u0275fac=function(e){return new(e||s)(t.Y36(C),t.Y36(b.G),t.Y36(A._W))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-final-appr-cic"]],decls:17,vars:4,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"d-flex","flex-row","flex-wrap","justify-content-around"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-default",3,"click"],[1,"badge","bg-primary","mr-1"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h5",1),t._uU(2),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.bsModalRef.hide()}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4)(7,"div",5),t.YNc(8,Qe,3,1,"div",6),t.qZA(),t._UZ(9,"hr"),t.TgZ(10,"h5"),t._uU(11),t.qZA()(),t.TgZ(12,"div",7)(13,"button",8),t.NdJ("click",function(){return n.submit()}),t._uU(14," Submit "),t.qZA(),t.TgZ(15,"button",9),t.NdJ("click",function(){return n.bsModalRef.hide()}),t._uU(16),t.qZA()()),2&e&&(t.xp6(2),t.Oqu(n.title),t.xp6(6),t.Q6J("ngForOf",n.studList),t.xp6(3),t.hij("Total : KES ",n.totalAmt,""),t.xp6(5),t.hij(" ",n.closeBtnName," "))},dependencies:[p.sg]}),a})();function ze(s,a){1&s&&t.GkF(0)}const Xe=[{path:"list-bulk-approvals",component:Ze},{path:"students",component:pe},{path:"all-students",component:fe},{path:"all-county-appr-students",component:Je},{path:"all-final-appr-students",component:(()=>{var s;class a{constructor(e,n,r,i,c){this.httpService=e,this.globalService=n,this.toastr=r,this.router=i,this.modalService=c,this.loading=!0,this.rows=[],this.filteredRows=[],this.defaultNavActiveId=1,this.columns=[{name:"Full Name",prop:"studentName"},{name:"Ref No",prop:"studRef"},{name:"Amount",prop:"awardedAmount"},{name:"Approved",prop:"isFinal"},{name:"Actions",prop:"_id"}],this.allColumns=[...this.columns],this.studentsList$=(0,u.of)([]),this.studentsToApprove=[],this.title="Assessor",this.actions=["View"],this.totalRecords=0,this.subs=[]}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}ngOnInit(){this.getIndividualData()}getIndividualData(e=0,n=50){this.loading=!0,this.studentsList$=this.httpService.getReq("bursary/students/ministry-status").pipe((0,T.U)(i=>(console.log(i),console.log(i),200===i.statusCode?(this.rows=i.data.map((d,m)=>null==d.isFinal?{...d,isFinal:!1,frontendId:m+1}:{...d,frontendId:m+1}),console.log(this.rows),this.totalRecords=this.rows.length,this.loading=!1,this.rows):(this.loading=!1,(0,u.of)([])))),(0,f.K)(i=>(this.loading=!1,i instanceof g?this.toastr.error(i.message,"API Timeout"):this.toastr.error(i.statusText||i.message,"Data Not Fetched"),(0,u.of)([]))))}updateColumns(e){this.columns=[...e]}triggerEvent(e){let n=JSON.parse(e);"View"==n.action&&(console.log(n.row),this.router.navigate([`/admin/bursary/student/county-status/${n.row.studRef}`]))}updateFilteredRowsEvent(e){this.filteredRows=e}selectedRowsEvent(e){this.studentsToApprove=e,this.studentsToApprove=[...this.studentsToApprove].filter(n=>!1===n.isFinal)}fincApproval(){this.studentsToApprove.length>0?(this.bsModalRef=this.modalService.show(Ve,{initialState:{title:"Approve Students",studList:this.studentsToApprove},class:"modal-md"}),this.bsModalRef.content.closeBtnName="Close",this.bsModalRef.onHide?.subscribe(n=>{console.log(n),this.getIndividualData()})):this.toastr.info("Select multiple students that will proceed to the next step")}}return(s=a).\u0275fac=function(e){return new(e||s)(t.Y36(b.G),t.Y36(S.s),t.Y36(A._W),t.Y36(v.F0),t.Y36(Z))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-list-final-appr-stud"]],decls:22,vars:8,consts:[[1,"pagetitle"],[1,"d-flex","justify-content-between","align-items-center"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","/admin/dashboard"],[1,"breadcrumb-item","active"],[1,"btn","bg-primary",3,"click"],[1,"text-white","m-0"],[1,"section"],[1,"d-flex","justify-content-end"],[1,"row"],[1,"col-md-12"],[1,"card","p-1"],[4,"ngIf"],[3,"columns","rows","actions","loadingIndicator","totalItems","outputEvent","selectedRowsEvent","updateFilteredRows"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Final Level - Students Page"),t.qZA(),t.TgZ(3,"div",1)(4,"nav")(5,"ol",2)(6,"li",3)(7,"a",4),t._uU(8,"Dashboard"),t.qZA()(),t.TgZ(9,"li",5),t._uU(10,"Students Approved from Finance"),t.qZA()()(),t.TgZ(11,"button",6),t.NdJ("click",function(){return n.fincApproval()}),t.TgZ(12,"p",7),t._uU(13,"Final Approval"),t.qZA()()()(),t.TgZ(14,"section",8),t._UZ(15,"div",9),t.TgZ(16,"div",10)(17,"div",11)(18,"div",12),t.YNc(19,ze,1,0,"ng-container",13),t.ALo(20,"async"),t.TgZ(21,"app-custom-tbl",14),t.NdJ("outputEvent",function(i){return n.triggerEvent(i)})("selectedRowsEvent",function(i){return n.selectedRowsEvent(i)})("updateFilteredRows",function(i){return n.updateFilteredRowsEvent(i)}),t.qZA()()()()()),2&e&&(t.xp6(19),t.Q6J("ngIf",t.lcZ(20,6,n.studentsList$)),t.xp6(2),t.Q6J("columns",n.columns)("rows",n.rows)("actions",n.actions)("loadingIndicator",!1)("totalItems",n.totalRecords))},dependencies:[p.O5,k,p.Ov]}),a})()},{path:"all-students-cm",component:Ee},{path:"student/:id",component:_e},{path:"student/ward-status/:id",component:Re},{path:"student/county-status/:id",component:He},{path:"ward-users",component:Te},{path:"county-users",component:je}];let tn=(()=>{var s;class a{}return(s=a).\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({providers:[Z],imports:[p.ez,v.Bz.forChild(Xe),H,l.UX]}),a})()}}]);